(function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleBuscador&&null!==ModuleBuscador?ModuleBuscador:{},t.ModuleBuscador=o,a=function(){function a(){}var t,n,r,i,l;return l=null,r=null,a.autocomplete=function(e){l=""===e?"https://claroshop.anteater.ai/autocompletar?cliente=claro":e,t(),r=o.AnteanterEstadistica},a.appStart=function(e,a){o.AnteaterApp.start(e,a),r=o.AnteanterEstadistica},t=function(){e(".anteanter_section .bt__search").on("click",function(){return n()}),e.widget("custom.claroComplete_anteanter",e.ui.autocomplete,{_renderMenu:function(a,o){var t;return t=this,e.each(o,function(e,o){o.label=o.cadena,o.title=o.cadena,o.value=o.cadena,t._renderItemData(a,o)})},_renderItemData:function(e,a){return this._renderItem(e,a).data("ui-autocomplete-item",a)},_renderItem:function(a,o){var t;return console.log(o),t=o.nombre,"word_item"===o.clase&&(t=e(e(o.nombre)[0]).html().replace(e(".anteanter_section #search").val(),"<em>"+e(".anteanter_section #search").val()+"</em>"),t="<span>"+t+"</span>",console.log(t,e(".anteanter_section #search").val())),e("<li>").html(t).appendTo(a).addClass(o.clase)}}),e(".anteanter_section #search").claroComplete_anteanter({highlightClass:"bold-text",source:function(a,o){console.log("urlAutoComplete",l),e.ajax({url:l,type:"POST",headers:{"Access-Control-Allow-Origin":"*"},data:{search:a.term},success:function(e){var a,t,n,r,l,c,s,d,u,p;for(r=[],a=2,d=[],t=[],p=[],u=e.suggestions,l=c=0,s=u.length;c<s;l=++c)n=u[l],""!==n.cadena&&("category_item"===n.clase&&t.length<=a&&t.push(n),"store_item"===n.clase&&p.length<=a&&p.push(n),"word_item"===n.clase&&d.length<=a&&d.push(n));console.log("autocomplete",d,p,t),r=d.concat(t,p),console.log(r),console.log("unificarPalabras",i(r)),o(i(r))}})},minLength:0,max:300,select:function(a,o){var t;if(console.log("Selected: "+o.item.value+" aka "+o.item.id,o.item),"word_item"!==o.item.clase)return r.clickProductoObjet(o.item.clase,e(o.item.nombre).attr("href"),1,""),e(location).attr("href",e(o.item.nombre).attr("href"));t={q:o.item.value},console.log(t),console.log(r),r.clickProductoObjet(o.item.value,e(location).attr("hostname")+"/resultados?"+e.param(t),1,""),console.log("/resultados/q="+o.item.value),e(location).attr("href","/resultados/q="+o.item.value)},focus:function(e,a){return a.item,console.log(a.item),!1}}).keydown(function(e){if(13===e.keyCode)return n()})},n=function(){var a,o,t,n;if(o=e(".anteanter_section #search").val(),console.log("palabra...",o),o.indexOf("sku:")>-1||o.indexOf("id:")>-1||o.indexOf("ean:")>-1){if(a=o.replace("sku:",""),a=o.replace("id",""),a=o.replace("ean",""),a.trim().length>0)return t={busquedaestricta:o},r.clickProductoObjet(o,e(location).attr("hostname")+"/resultados/q=/?"+e.param(t),1,""),e(location).attr("href","/resultados/q=/?"+e.param(t));console.log("else palabra...",o)}return n=e(".anteanter_section #search").val(),r.clickProductoObjet(n,e(location).attr("hostname")+"/resultados/q="+n,1,""),e(location).attr("href","/resultados/q="+n)},i=function(e){var a;return a={},e.filter(function(e){var o;return o=!a[e.nombre.toLowerCase()]||!1,a[e.nombre.toLowerCase()]=!0,o})},a}(),o.Anteater=a}).call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleBuscador&&null!==ModuleBuscador?ModuleBuscador:{},"undefined"!=typeof ModuleWishList&&null!==ModuleWishList&&ModuleWishList,t.ModuleBuscador=o,a=function(){function a(){}var t,n,r,i,l,c,s,d,u;return t=null,s=null,r=null,i=null,a.start=function(e,a){t=o.AnteaterAPI,t.setUrlBuscador(e),t.setClient(a),s=o.Render,r=o.DataLeyer,i=o.AnteanterEstadistica,t.calcParam().done(function(e){var a;return a=e.GSP.RES,void 0===a?(d(e),c([])):(d(e),c(e.GSP.RES.M))}),u()},d=function(a){var o,n,r,i,l,c,d,u,p,m,f,g,v;if(g=[],o=a.GSP.RES,console.log(a.GSP),console.log(o),console.log(typeof o),void 0===o)g=[],i=[],n=[],m=[],s.resultsSearch("0 ",t.getParams_query().q);else{for(1===a.GSP.RES.M||"1"===a.GSP.RES.M?g.push(a.GSP.RES.R):g=a.GSP.RES.R,n=a.GSP.RES.PARM.PMT.filter(function(e){return"marcas"===e.DN}),i=a.GSP.RES.PARM.PMT.filter(function(e){return"categories"===e.DN}),m=a.GSP.RES.PARM.PMT.filter(function(e){return"sale_precio"===e.DN}),s.cardProducts(g),ModuleWishList.WishList.start(),l=[],console.log(i),i[0].PV.hasOwnProperty("V")?l.push(i[0].PV):l=i[0].PV,console.log("categorias ===",l),r=[],n[0].PV.hasOwnProperty("V")?r.push(n[0].PV):r=n[0].PV,f=[],m[0].PV.hasOwnProperty("V")?f.push(m[0].PV):f=m[0].PV,s.filterBrand(r),s.filterCategory(l),s.filterPrice(f),s.resultsSearch(a.GSP.RES.M,t.getParams_query().q),console.log("filtros.......",t.getRequiredfields()),v=t.getRequiredfields(),c=d=0,u=v.length;d<u;c=++d)p=v[c],"price"===p.llave&&">"===p.operador?(e("#precio").hide(),e("#filtro_aplicado_precio").show(),e("#precioMenorAplicado").html(p.valor)):"price"===p.llave&&"<"===p.operador?e("#precioMayorAplicado").html(p.valor):e("."+p.llave).after('<span class="ui-icon ui-icon-close clear-filter"></span>');1===l.length&&e(".categories").after('<span class="ui-icon ui-icon-close clear-filter"></span>')}return t.updateUrl()},u=function(){return e(".rowProductos").on("click",".cardProduct a",function(a){var o,n;n=e(this).data("id"),o=e(this).data("idproducto"),r.productClick(parseInt(n)),i.clickProductoObjet(t.getParams_query().q,e(location).attr("href"),t.getPagina(),"<producto>:<"+o+">")}),e("#marcas").on("click",".marca-filter",function(a){var o;return a.preventDefault(),e("#paginator").html(""),o=e(this).data("filter"),t.agregarFiltro("attribute_marca",o,":"),n(),t.buscar(t.getParams_query().q).done(function(e){return d(e),c(e.GSP.RES.M)})}),e("#marcas").on("click",".clear-filter",function(a){return a.preventDefault(),e("#paginator").html(""),t.quitarFiltro("attribute_marca"),n(),t.buscar(t.getParams_query().q).done(function(e){return d(e),c(e.GSP.RES.M)})}),e("#categorias").on("click",".categoria-filter",function(a){var o;return a.preventDefault(),e("#paginator").html(""),o=e(this).data("filter"),t.agregarFiltroCategory(o),n(),t.buscar(t.getParams_query().q).done(function(e){return d(e),c(e.GSP.RES.M)})}),e("#categorias").on("click",".clear-filter",function(a){return a.preventDefault(),e("#paginator").html(""),t.quitarFiltroCategory(),n(),t.buscar(t.getParams_query().q).done(function(e){return d(e),c(e.GSP.RES.M)})}),e("#sliderPrecios").slider({range:!0,slide:function(a,o){e("#precioMenor").val(o.values[0]),e("#precioMayor").val(o.values[1])}}),e("#precio .aplicar").on("click",function(a){var o,r;return r=e("#precioMenor").val(),o=e("#precioMayor").val(),e("#paginator").html(""),parseInt(r)>=parseInt(o)&&(o=parseInt(r)+10),t.agregarFiltro("price",r,">"),t.agregarFiltro("price",o,"<"),console.log("menor",r),console.log("mayor",o),console.log(t.getRequiredfields()),console.log(t.getParams_query()),n(),e("#precio").hide(),e("#filtro_aplicado_precio").show(),t.buscar(t.getParams_query().q).done(function(e){return d(e),c(e.GSP.RES.M)})}),e("#filtro_aplicado_precio .clear-filter").on("click",function(a){return a.preventDefault(),e("#precio").show(),e("#filtro_aplicado_precio").hide(),t.quitarFiltro("price"),n(),t.buscar(t.getParams_query().q).done(function(e){return d(e)})}),e("#ordenar").on("change",function(e){return e.preventDefault(),t.setOrdenar(this.value),n(),t.buscar(t.getParams_query().q).done(function(e){return d(e),c(e.GSP.RES.M)})})},c=function(a){var o,r;r=a/t.getProductosPorPagina(),r>200&&(r=200),console.log("Paginas...",a,t.getProductosPorPagina(),r),e("#paginator").html(""),o=10,l.any()&&(o=3),r>1&&e("#paginator").pagination({currentPage:t.getPagina(),items:r,edges:1,displayedPages:o,prevText:" < ",nextText:" > ",cssStyle:"light-theme",onPageClick:function(a,o){return console.log("Pagina",a),o.preventDefault(),e("html, body").animate({scrollTop:0},600),console.log(e(e("#paginator li span")[0]).html()),1===e(e("#paginator li")[2]).find("span").length&&(console.log("Aplicndo................"),e(e("#paginator li a")[1]).html("<<")),e(e("#paginator li a")[e("#paginator li a").length-2]).html(">>"),t.setPagina(a),n(),t.buscar(t.getParams_query().q).done(function(e){return d(e)})},onInit:function(){return e(e("#paginator li a")[e("#paginator li a").length-2]).html(">>")}})},n=function(){return e("#products").html(""),e("#marcas dl").html(""),e("#categorias dl").html("")},l={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return l.Android()||l.BlackBerry()||l.iOS()||l.Opera()||l.Windows()}},a}(),o.AnteaterApp=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleBuscador&&null!==ModuleBuscador?ModuleBuscador:{},t.ModuleBuscador=o,a=function(){function a(){}return a.start=function(){return e(function(){o.Buscador.autocomplete()})},a}(),o.Buscador=a}.call(this),function(){var e,a,o;o="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,jQuery,a="undefined"!=typeof ModuleCaja&&null!==ModuleCaja?ModuleCaja:{},o.ModuleCaja=a,e=function(){function e(){}var a,o,t,n,r,i,l,c,s,d,u,p,m,f,g,v,h,C,y,b,x,P;return C={},c="visa",i="masterc",a="amex",n="CVV",o="CID",t="CVC","CVN",C[c]={niceType:"Visa",type:c,prefixPattern:/^4$/,exactPattern:/^4\d*$/,gaps:[4,8,12],lengths:[16,18,19],code:{name:n,size:3}},C[i]={niceType:"Mastercard",type:i,prefixPattern:/^(5|5[1-5]|2|22|222|222[1-9]|2[3-6]|27|27[0-2]|2720)$/,exactPattern:/^(5[1-5]|222[1-9]|22[3-9]|2[3-6]|27[0-1]|2720)\d*$/,gaps:[4,8,12],lengths:[16],code:{name:t,size:3}},C[a]={niceType:"American Express",type:a,prefixPattern:/^(3|34|37)$/,exactPattern:/^3[47]\d*$/,isAmex:!0,gaps:[4,10],lengths:[15],code:{name:o,size:4}},h=void 0,l=[c,i,a],y=function(e,a,o){return{card:e,isPotentiallyValid:a,isValid:o}},e.cardNumber=function(e){var a,o,t,n,r,i;if(i=void 0,a=void 0,t=void 0,n=void 0,o=void 0,r=void 0,"number"==typeof e&&(e=String(e)),"string"!=typeof e)return y(null,!1,!1);if(e=e.replace(/\-|\s/g,""),!/^\d*$/.test(e))return y(null,!1,!1);if(i=d(e),0===i.length)return y(null,!1,!1);if(1!==i.length)return y(null,!0,!1);for(a=i[0],n="unionpay"===a.type||g(e),r=Math.max.apply(null,a.lengths),o=0;o<a.lengths.length;){if(a.lengths[o]===e.length)return t=e.length!==r||n,y(a,t,n);o++}return y(a,e.length<r,!1)},g=function(e){var a,o,t,n;for(n=0,a=!1,o=e.length-1,t=void 0;o>=0;)t=parseInt(e.charAt(o),10),a&&(t*=2)>9&&(t=t%10+1),a=!a,n+=t,o--;return n%10==0},s=function(e){var a;return a=void 0,e?(a=JSON.parse(JSON.stringify(e)),delete a.prefixPattern,delete a.exactPattern,a):null},h=s(l),m=function(e){return C[e]},d=function(e){var a,o,t,n,r;if(n=void 0,r=void 0,o=void 0,t=[],a=[],!("string"==typeof e||e instanceof String))return[];for(o=0;o<h.length;)n=h[o],r=m(n),0!==e.length?(r.exactPattern.test(e)?a.push(s(r)):r.prefixPattern.test(e)&&t.push(s(r)),o++):(t.push(s(r)),o++);return a.length?a:t},b=function(e,a,o,t){return{isValid:e,isPotentiallyValid:a,month:o,year:t}},e.expirationDate=function(e,a){var o,t,n,r;if(o=void 0,n=void 0,r=void 0,t=void 0,"string"==typeof e)e=e.replace(/^(\d\d) (\d\d(\d\d)?)$/,"$1/$2"),o=v(e);else{if(null===e||"object"!=typeof e)return b(!1,!1,null,null);o={month:String(e.month),year:String(e.year)}}if(n=u(o.month),r=p(o.year,a),n.isValid){if(r.isCurrentYear)return t=n.isValidForThisYear,b(t,t,o.month,o.year);if(r.isValid)return b(!0,!0,o.month,o.year)}return n.isPotentiallyValid&&r.isPotentiallyValid?b(!1,!0,null,null):b(!1,!1,null,null)},x=function(e,a,o){return{isValid:e,isPotentiallyValid:a,isValidForThisYear:o||!1}},u=function(e){var a,o,t;return o=void 0,t=void 0,a=(new Date).getMonth()+1,"string"!=typeof e?x(!1,!1):""===e.replace(/\s/g,"")||"0"===e?x(!1,!0):/^\d*$/.test(e)?(o=parseInt(e,10),isNaN(e)?x(!1,!1):(t=o>0&&o<13,x(t,t,t&&o>=a))):x(!1,!1)},r=19,P=function(e,a,o){return{isValid:e,isPotentiallyValid:a,isCurrentYear:o||!1}},p=function(e,a){var o,t,n,i,l,c,s;return o=void 0,t=void 0,n=void 0,l=void 0,c=void 0,s=void 0,i=void 0,a=a||r,"string"!=typeof e?P(!1,!1):""===e.replace(/\s/g,"")?P(!1,!0):/^\d*$/.test(e)?(l=e.length)<2?P(!1,!0):(t=(new Date).getFullYear(),3===l?(n=e.slice(0,2),o=String(t).slice(0,2),P(!1,n===o)):l>4?P(!1,!1):(e=parseInt(e,10),c=Number(String(t).substr(2,2)),2===l?(i=c===e,s=e>=c&&e<=c+a):4===l&&(i=t===e,s=e>=t&&e<=t+a),P(s,s,i))):P(!1,!1)},v=function(e){var a,o,t,n;return o=void 0,a=void 0,t=void 0,n=void 0,/\//.test(e)?e=e.split(/\s*\/\s*/g):/\s/.test(e)&&(e=e.split(RegExp(" +","g"))),f(e)?{month:e[0],year:e.slice(1).join()}:(a="0"===e[0]||e.length>5?2:1,"1"===e[0]&&(t=e.substr(1),n=p(t),n.isPotentiallyValid||(a=2)),o=e.substr(0,a),{month:o,year:e.substr(o.length)})},f=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e}(),a.CardValidate=e}.call(this),function(){var e,a,o,t,n;n="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,t=n.location.protocol+"//"+n.location.hostname+":"+n.location.port,o="undefined"!=typeof ModuleCaja&&null!==ModuleCaja?ModuleCaja:{},"undefined"!=typeof ModuleCarrito&&null!==ModuleCarrito&&ModuleCarrito,n.ModuleCaja=o,a=function(){function a(){}var o;return a.init=function(){return e("#btnClickRecoge").click(function(e){e.preventDefault(),o()})},o=function(){var a,o,t;if(e("#color").length>0?(o=e("#color").val(),t=e("#talla").val()):(o=1,t=1),""!==t&&""!==o)return 1!==o&&1!==t?(a=t.split("|"),e("#colorCR").val(o).trigger("change"),e("#tallaCR").val(a[2]).trigger("change")):e("#lnkMuestraSucursales").click(),e.fancybox("#modal-click-recoge")},a.getTallasByColor=function(a,o){var t,n,r,i,l,c,s,d,u;if(e("#tallaCR").prop("disabled",!0),""!==a){for(e("#tallaCR").children().remove(),n=e.parseJSON(o),console.log(o),console.log(n),u=[],i=0,c=n.length;i<c;i++)t=n[i],t.color===a&&(u=t.sizes);for(console.log(u),r="",l=0,s=u.length;l<s;l++)d=u[l],r+='<option value="'+d.sku+'">'+d.size+"</option>";return e(r).appendTo("#tallaCR"),e("#tallaCR").prop("selectedIndex",0),e("#tallaCR").prop("disabled",!1),this.cambioTalla()}},a.cambioTalla=function(){return e("#lnkMuestraSucursales").click()},a.goPayment=function(a,o){var r,i;return loading(!0),r=e("#tallaCR").val(),void 0===r&&(r=null),i=t+"/carrito/click-recoge/caja/"+a+"/"+o+"/"+r+"/1",n.location.href=i},a.getTiendasByProducto=function(a,o){var t,n,r;return console.log(e("#tallaCR").val()),e("#colorCR").length>0?(n=e("#colorCR").val(),r=e("#tallaCR").val()):(r=0,n=0),t=e("#c").val(),loading(!0),""!==r&&""!==n?e.ajax({url:o+"?time="+Date(),type:"POST",data:{idProducto:a,cantidad:t,talla:r},success:function(a){var o,t,n;return a.estatus?(e("#msgErrorClickRecoge").hide(),e("#contenidoTiendasCR").html(""),e("#cboSucursalesCR_chosen").length&&(e("#cboSucursalesCR_chosen").remove(),e("#cboSucursalesCR").remove()),a.sucursales.length>0?(e("#msgErrorClickRecoge").hide(),o="",t='<option value="">Ver todas las tiendas</option>',e.each(a.sucursales,function(e,a){return o+='<article class="box__distancia" id="artSucursal'+a.id+'"><div class="contInfo izqFlotante"><ul><li class="titTienda">'+a.name+'</li></ul></div><p class="descTienda">'+a.completeAddress+'</p><p class="Horarios__Tienda">'+a.schedule+' hrs.</p><a href="tel:'+a.lada+" "+a.phone+'" class="telTienda">'+a.lada+" "+a.phone+'</a><a id="lnkClickRecoge" href="#" onclick="ModuleCaja.ClickRecoge.goPayment('+a.idProduct+","+a.id+')" class="Tienda">Recoge aquí</a></article></article>',t+='<option value="'+a.id+'">'+a.name+"</option>"}),e(o).appendTo("#contenidoTiendasCR"),n='<select id="cboSucursalesCR" onchange="filtraSucursal()" data-placeholder="Ver todas" class="chosen-select Desktop">',n+=t+"</select>",e("#pnlTiendas #cboSucursalesCR").remove(),e(n).insertAfter("#txtNombre"),e("#pnlTiendas").show("slow"),loading(!1),console.log(a)):(loading(!1),e("#msgErrorClickRecoge").show("slow"),console.log(a))):(loading(!1),console.log(a))},fail:function(e){return loading(!1)}}):loading(!1)},a}(),o.ClickRecoge=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleCaja&&null!==ModuleCaja?ModuleCaja:{},t.ModuleCaja=o,a=function(){function a(){}var o,n,r,i,l,c,s,d,u,p,m,f,g,v,h,C,y,b,x,P;return a.init=function(){return h(),v(),e("body").off("click","#btnpagarTarjeta"),e("#btnpagarTarjeta").click(r),e("#msiHtml").hide(),e("#msgErrorTarjeta").hide(),e("body").blur("#numero",function(){return console.log("ejecucion de blur numero")}),e("#codpostal").blur(function(e){u(this.value)}),e("body").on("paste","#numero",function(){return!1}),e("body").on("copy","#numero",function(){return!1}),e("body").on("keyup","#numero",function(){return m()}),e("body").on("keyup","#cs",function(){return f()})},f=function(){var a;return a=e("#cs").val().replace(/[^0-9]/g,""),e("#cs").val(a)},m=function(){var a,o,t,r,i,l;return a=e("#numero").val().replace(/[^0-9]/g,""),e("#numero").val(a),a.length>=4?(l=ModuleCaja.CardValidate.cardNumber(a),console.log(l),l.isPotentiallyValid?(i=l.card,t=Math.max.apply(Math,i.lengths)+i.gaps.length,r=Math.min.apply(Math,i.lengths),e("#numero").attr("minlength",r),e("#numero").attr("maxlength",t),e("#cs").attr("minlength",i.code.size),e("#cs").attr("maxlength",i.code.size),e("#tipoTarjeta").val(i.type),C(),e("#formTar > div.FechaVencim > div.FV-number").addClass(i.type),o=d(a,i.gaps),e("#numero").val(o),e("#numero").removeClass("error"),n(i.type),e("#nobre").val("rem")):(e("#nobre").val("ram"),o=d(a,l.card.gaps),e("#numero").val(o),p(),e("#numero").addClass("error"),e("#tipoTarjeta").val(""),C())):(p(),e("#tipoTarjeta").val(""))},c=function(){return loading(!0),t.location.href="/caja/tarjetasCreditoDebito/declinarCarrito"},o=function(){var a;if((a=e("#captcha").data("attempts"))>=1&&(i(),a>=2&&s(),a>=3))return c()},i=function(){var a,o;return a=e("#captcha").data("created"),l(),0===a?(console.log("Se intenta crear el captcha."),o={sitekey:"6LcxUFEUAAAAAJDS_ta17kci4oSaRmoDmOMbiZS3",callback:P,"expired-callback":l,"error-callback":l},grecaptcha.render("captcha",o),e("#captcha").data("created",1)):(console.log("se intenta resetear el captcha."),grecaptcha.reset())},P=function(){return e("#captcha").data("status",1)},l=function(){return e("#captcha").data("status",0)},d=function(e,a){var o,t;for(e=e.replace(/[^0-9]/g,""),o="",t=0;t<e.length;)a.forEach(function(e){t===e&&t>0&&(o=o.concat(" "))}),o=o.concat(e[t]),t++;return o},n=function(a){var o;return o=["visa","masterc","amex"],!in_array(a,o,!1)||(p(),e("#img_"+a).addClass("active"))},p=function(){var a;return a=["visa","masterc","amex"],a.forEach(function(a){return e("#img_"+a).removeClass("active")})},s=function(){var a,o;return a=30,e("#delay").data("status",0),o=setInterval(function(){if(e("#delay").html("Espera "+a.toString()+" segundos para realizar el pago"),0===--a)return clearInterval(o),e("#delay").data("status",1),e("#delay").html("")},1e3)},x=function(){var a,o,t,n,r,i,l,c,s,d,u,p,m,f,g,v,h,C,y;return t=e("#numero").val().replace(/[^0-9]/g,""),d=e("#nombreTar").val(),s=e("#mv").val(),y=e("#av option:selected").text(),n=e("#cs").val(),c=e("#idTarjeta").val(),f=e("#tipoTarjeta").val(),i=s+" "+y,o=e("#captcha").data("status"),a=e("#captcha").data("attempts"),l=e("#delay").data("status"),g=ModuleCaja.CardValidate.cardNumber(t),r=(null!=(u=g.card)&&null!=(p=u.code)?p.size:void 0)?g.card.code.size:3,h=ModuleCaja.CardValidate.expirationDate(i),v=r===n.length,C=null!=(m=d.trim().length>0)?m:{true:!1},c>0&&(g.isValid=!0,h.isValid=!0,C=!0,r="amex"===f?4:3,v=r===n.length),0===a&&(o=!0),!1===g.isValid?e("#numero").addClass("error"):e("#numero").removeClass("error"),!1===h.isValid?(e("#mv").addClass("error"),e("#av").addClass("error")):(e("#mv").removeClass("error"),e("#av").removeClass("error")),!1===C?e("#nombreTar").addClass("error"):e("#nombreTar").removeClass("error"),!1===v?e("#cs").addClass("error"):e("#cs").removeClass("error"),console.log({validCard:g.isValid,validDate:h.isValid,validName:C,validCode:v,captcha:o,delay:l}),!!(g.isValid&&h.isValid&&C&&v&&o&&l)},r=function(a){var n,r,i,l,c,s,d,u,p,m,f,g,v,h,C,y,b,P,w;if(x())return a.preventDefault(),y=e("#numero").val().replace(/[^0-9]/g,""),C=e("#nombreTar").val(),v=e("#mv").val(),n=e("#av").val(),i=e("#cs").val(),f=parseInt(e("#idTarjeta").val()),d=e("#deviceFingerprintID").val(),g=e("#mensualidad").val(),u=e("#direccion_tarjeta").val(),c=e("#codpostal").val(),l=e("#coloniaTar").val(),h=e("#municipioTar").val(),m=e("#estadoTar").val(),b=e("#telefonoTar").val(),r=e("#ciudadTar").val(),p=e("input[name='directorio']:checked").val(),P=e("#tipoTarjeta").val(),s={numeroTar:y,nombreTar:C,mesvenc:v,anyovenc:n,codseg:i,deviceFinger:d,meses:g,direccion_tarjeta:u,cpostal:c,colonia:l,municipio:h,estado:m,ciudad:r,directorio:p,idTarjeta:f,telefono:b,tipoTarjeta:P},w="/caja/tarjetasCreditoDebito/validartarjetas",e.ajax({url:w,type:"post",dataType:"json",data:s,beforeSend:function(){var a,o;loading(!0),o=e("#captcha").data("attempts"),a=o+1,e("#captcha").data("attempts",a),e("#msgErrorTarjeta").hide().html("")},success:function(a){var n,r,i,l,c,s;if(console.log("respuesta:"+a.exito+a.error),"3d"===a.exito){c=a.datos,l="post",s="https://api.openpay.mx/charges-form/eglobal",n=document.createElement("form"),n.setAttribute("method",l),n.setAttribute("action",s);for(i in c)c.hasOwnProperty(i)&&(r=document.createElement("input"),r.setAttribute("type","hidden"),r.setAttribute("name",i),r.setAttribute("value",c[i]),n.appendChild(r));document.body.appendChild(n),n.submit()}else"fraud"===a.exito?t.location.href="/caja/tarjetasCreditoDebito/bloquearCuenta":!0===a.exito?t.location.href="/caja/tarjetasCreditoDebito/thankupage":(loading(!1),e("#msgErrorTarjeta").show().html(a.error),o())},error:function(){loading(!1),e("#msgErrorTarjeta").show().html("Intente mas tarde")}})},a.mesesCard=function(a,o){var t,n,r,i;if(a=a.replace(/[^0-9]/g,""),a.length>=6&&(i=ModuleCaja.CardValidate.cardNumber(a),i.isPotentiallyValid))return t=a.substring(0,6),n={bim:t,tipoTarjeta:o},r="/caja/tarjetasCreditoDebito/validaMeses",e.ajax({url:r,type:"post",dataType:"json",data:n,beforeSend:function(){loading(!0)},success:function(a){var o;loading(!1),!0===a.exito?(e("#msiHtml").show(),console.log("mensualidades: mesn"),o=a.mensualidades,e("#mensualidad").html(""),e.each(o,function(a,o){e("<option>").val(o.mensualidad).text(o.mensualidad+" pago de "+o.pago).appendTo("#mensualidad")})):(e("#msiHtml").hide(),e("#msiMsg").html(a.msg))},error:function(){loading(!1),console.log("error en el ajax")}})},y=function(){var a,o,t;t=e("#coloniaTar").val(),o=void 0,a=void 0,"none"===t&&(o=e("#coloniaTar").parent(),a=o.parent(),o.remove(),a.append("<input type='text' name='coloniaTar' id='coloniaTar' value='' class='cajaTextoGris' required/>"))},b=function(){var a,o,t;t=e("#municipioTar").val(),o=void 0,a=void 0,"none"===t&&(o=e("#municipioTar").parent(),a=o.parent(),o.remove(),a.append("<input type='text' name='municipioTar' id='municipioTar' value='' class='cajaTextoGris' required/>"))},u=function(a){parseInt(a)&&5===a.length&&(loading(!0),ModuleSepomex.Sepomex.serviceSepomex(a).then(function(o){var t;return console.log("cp:"+a),console.log(o),!0===o.estatus?""!==o.datacp.estado.d_estado?(e("#estadoTar").val(o.datacp.estado.d_estado),e("#coloniaTar").removeAttr("disabled"),e("#estadoTar").removeAttr("disabled"),e("#municipioTar").removeAttr("disabled"),e("#ciudadTar").removeAttr("disabled"),e("#municipioContainerTar span").remove(""),e("#municipioTar").remove(),o.datacp.municipios.length>0?(e("body").off("change","#municipioTar"),e("#municipioContainerTar").append('<span><select name="municipioTar" id="municipioTar" class="selectGris" required="required"></select></span>'),e.each(o.datacp.municipios,function(e,a){return t+="<option value="+a.d_mnpio+">"+a.d_mnpio+"</option>"}),t+='<option value="none"> Me gustaría escribirla por mi mismo.</option>',e("#municipioTar").html(""),e("#municipioTar").html(t),e("#municipioTar").change(b)):(e("#municipioContainerTar span").remove(),e("#municipioContainerTar").append("<input type='text' maxlength='35' name='municipioTar' id='municipio' classTar='cajaTextoGris'  value='' />")),e("#coloniaContainerTar span").remove(""),e("#coloniaTar").remove(),o.datacp.colonia.length>0?(e("body").off("change","#coloniaTar"),e("#coloniaContainerTar").append("<span><select name='coloniaTar' id='coloniaTar' class='selectGris' required='required'></select></span>"),t="",e.each(o.datacp.colonia,function(e,a){return t+="<option value="+a.d_asenta+">"+a.d_asenta+"</option>"}),t+='<option value="none"> Me gustaría escribirla por mi mismo.</option>',e("#coloniaTar").html(""),e("#coloniaTar").html(t),e("#coloniaTar").change(y)):(e("#coloniaContainerTar span").remove(),e("#coloniaContainerTar").append("<input type='text' maxlength='35' name='coloniaTar' id='coloniaTar' class='cajaTextoGris' value='' />")),""!==o.datacp.ciudad.d_ciudad&&e("#ciudadTar").val(o.datacp.ciudad.d_ciudad),loading(!1)):(e("#codpostal, #estadoTar").val(""),alert("En nuestros registros no encontramos tu cp, intenta con otro CP"),loading(!1)):(alert("En nuestros registros no encontramos tu cp, intenta con otro"),e("#codpostal, #estadoTar").val(""),loading(!1)),loading(!1)}))},h=function(){e.ajax({type:"POST",url:"/caja/tarjetasCreditoDebito/obtenerTarjetas",dataType:"JSON",beforeSend:function(){return e("#msgErrorTarjeta").hide().html(""),loading(!0)},success:function(a){var o,t,n;if(loading(!1),!0===a.status){for(n=0,t="";n<a.tarjetas.length;)0===n?(o="Activeradio2",e("#numero, #nombreTar, #av, #mv").attr("readonly",!0),g(a.tarjetas[n])):o="",t+='<div class="radio-tc3 bords radioGroup '+o+'" onclick="ModuleCaja.FormaPagoTarjetasCredDeb.seleccionaDireccion(this)" data-id="'+a.tarjetas[n].id+'" data-bm="'+a.tarjetas[n].bm+'">',t+='<label class="chekin">Usar tarjeta **** **** **** '+a.tarjetas[n].digitos+"</label>",t+="</div>",n++;t+='<div class="radio-tc4 bords radioGroup" onclick="ModuleCaja.FormaPagoTarjetasCredDeb.seleccionaDireccion(this)" data-id="0">',t+='<label class="chekin">Ingresar nueva tarjeta</label>',t+="</div>"}else console.log("error tarjet"),""!==a.error&&e("#msgErrorTarjeta").show().html(a.error),loading(!1);e("#form-tdc").html(""),e("#form-tdc").html(t)},error:function(){loading(!1),e("#msj_error_telmex").html("").html("hubo un error al procesar la peticion favor de intentar mas tarde")}})},a.seleccionaDireccion=function(a){var o;return e("#numero, #nombreTar, #av, #mv, #cs").removeClass("error"),e("#msgErrorTarjeta").hide().html(""),e(".radioGroup").hasClass("Activeradio2")&&(o=e(a).data("id"),0===o?(document.getElementById("formTar").reset(),e("body").off("blur","#numero"),e("#idTarjeta").val(o),e("#numero, #nombreTar, #av, #mv").attr("readonly",!1),e("#numero, #nombreTar, #av, #mv","#true").attr("required",!0),e("#containerTarjeta").html(""),e("#containerTarjeta").html('<input data-validate="tarjeta" type="text" id="numero" name="numero" onblur="ModuleCaja.FormaPagoTarjetasCredDeb.recalculaMeses( 3912, this.value)" tabindex="1" class="form-control" placeholder="Ej: 12012341234" required="required" maxlength="16"><span class="alertaErrorG">Revisa que los datos de tu tarjeta sean los correctos</span>'),v(),p()):ModuleCaja.FormaPagoTarjetasCredDeb.dataTarjeta(o).done(function(a){return console.log(a),a.status?(e("#numero, #nombreTar, #av, #mv").attr("required",!1),e("#numero, #nombreTar, #av, #mv").attr("readonly",!0),console.log(a.dataTarjeta.bm),ModuleCaja.FormaPagoTarjetasCredDeb.recalculaMeses(3912,a.dataTarjeta.bm).then(function(e){return g(a.dataTarjeta)})):(e("#msgErrorTarjeta").show().html(a.error),loading(!1))})),e(".radioGroup").removeClass("Activeradio2"),e(a).addClass("Activeradio2")},g=function(a){console.log(a),e("#containerTarjeta").html(""),e("#containerTarjeta").html('<input type="text" id="numero" name="numero"  class="form-control" tabindex="1" readonly value="**** **** **** '+a.digitos+'">'),e("#nombreTar").val(a.nombre+" "+a.apellido),e("#av, #mv").val(""),e("#av").html('<option disabled="" selected="" value="">****</option>'),e("#mv").html('<option disabled="" selected="" value="">**</option>'),e("#idTarjeta").val(a.id),e("#tipoTarjeta").val(a.tipo),C(),e("#formTar > div.FechaVencim > div.FV-number").addClass(a.tipo),n(a.tipo)},v=function(){var a,o,t,n,r,i,l,c,s;if(c=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],o=document.getElementById("av"),a=(new Date).getFullYear(),t=13,e("#av").html(""),e("#mv").html(""),e("#numero, #nombreTar, #av, #mv").attr("required",!0),function(e,n,r){var i,l,c,s;if(null!==o)for(e.add(new Option("Año","0000"),null),i=l=a,c=a+t;l<=c?i<c:i>c;l<=c?++i:--i)s=n.toString(),s=s.substring(s.length-2),e.add(new Option(n++,s),null)}(o,a),null!==(i=document.getElementById("mv"))){for(i.add(new Option("Mes","00"),null),n=0,s=[];n<c.length;)r=n+1,l=r<10?"0"+r:r,i.add(new Option(l+" - "+c[n],l),null),s.push(n++);return s}},a.dataTarjeta=function(a){return loading(!0),e.ajax({url:"/caja/tarjetasCreditoDebito/obtenerTarjeta",type:"POST",dataType:"json",cache:!1,data:{idTarjeta:a}})},a.recalculaMeses=function(e,a){var o,t;return o=a.replace(/[^0-9]/g,""),o.length>=6&&(t=ModuleCaja.CardValidate.cardNumber(o),!!t.isPotentiallyValid&&ModuleCaja.ResumenCompra.recalcular(e,a).then(function(e){return ModuleCaja.FormaPagoTarjetasCredDeb.mesesCard(a,t.type)}))},function(){var a;return a=e("#idTarjeta").val(),"0"===a?ModuleValida.ValidaFormulario.validaFormulario("formTar"):""!==e("#cs").val()||(e("#cs").addClass("error"),!1)},C=function(){return e("#formTar > div.FechaVencim > div.FV-number").removeClass("masterc"),e("#formTar > div.FechaVencim > div.FV-number").removeClass("visa"),e("#formTar > div.FechaVencim > div.FV-number").removeClass("amex")},a}(),o.FormaPagoTarjetasCredDeb=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleCaja&&null!==ModuleCaja?ModuleCaja:{},t.ModuleCaja=o,a=function(){function a(){}var o,t;return a.start=function(){return e(function(){t()})},t=function(){return e("#enviaToken").click(o)},o=function(){return loading(!0),e.ajax({url:"/selfservice/envioToken/",type:"POST",dataType:"json",success:function(a){return console.log(a),a.status?(console.log(a.url+"?token="+a.token,"_blank"),window.open(a.url+"?token="+a.token,"_blank"),loading(!1)):(e.fancybox.open({type:"iframe",href:"/registrate/box?opcion=loginss&register=active",titlePosition:"inside",transitionIn:"none",transitionOut:"none",width:"100%",maxWidth:600}),loading(!1))}})},function(){},a}(),o.LoginSelfService=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleCaja&&null!==ModuleCaja?ModuleCaja:{},t.ModuleCaja=o,a=function(){function a(){}return a.start=function(){return e(function(){o.DireccionesEnvio.init(),o.ClickRecoge.init(),o.FormaPagoTarjetasCredDeb.init()})},a}(),o.App=a}.call(this),function(){var e,a,o,t,n,r;n="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,t=n.location.protocol+"//"+n.location.hostname+":"+n.location.port,r=[],o="undefined"!=typeof ModuleCarrito&&null!==ModuleCarrito?ModuleCarrito:{},"undefined"!=typeof ModuleWishList&&null!==ModuleWishList&&ModuleWishList,n.ModuleCarrito=o,a=function(){
function a(){}var o,i,l,c,s,d,u,p,m;return a.init=function(){return this.ajaxLogin(),e("#addToCart").click(l),e("#addToCartHome").click(i)},function(){return e.ajax({type:"get",url:t+"/carrito/getAjaxToken",dataType:"json",success:function(e){return console.log(e),e},error:function(){return console.log("Fallo al intentar obtener el token"),[]}})},c=function(){return e.ajax({type:"GET",url:t+"/carrito/obtener",dataType:"json",success:function(e){var a;return u(e.productos),ScarabQueue.push(["cart",function(){var o,t,n,r;for(n=e.productos,r=[],o=0,t=n.length;o<t;o++)a=n[o],r.push({item:a.id,price:a.precio,quantity:a.carritoCantidad});return r}()]),console.log(e)},error:function(e){return console.log("Fallo al intentar obtener el carrito")}})},l=function(a){var t;return null==a&&(a=!0),loading(!0),t=e("#det_compra").serializeArray(),agregarProductoCarrito("det_compra"),trackfb("det_compra"),o(t,a)},i=function(){var a;return a=e("#frmProductHome").serializeArray(),e.fancybox.close(),a[3]={name:"id",value:a[0].value},a[4]={name:"c",value:1},console.log(a),o(a,!1)},o=function(a,o){var n,r,i;return null==o&&(o=!0),console.log(a),loading(!0),r=e("#idprod").val(),i=parseInt(e("#precioInt").val()),console.log("preciocart: "+i),n=parseInt(e("#c").val()),carruselModalRecomendadosCarrito(!0,""+r,i,n),e.ajax({type:"post",url:t+"/carrito/agregar",dataType:"json",data:a,success:function(a){if(loading(!1),o)return u(a.productos),e.fancybox.open("#modal-carrito"),addSlider("recomendadosModal",3,""),lazyload(),recreaSlider(),ModuleWishList.WishList.start()},error:function(e){return loading(!1),console.log("Error al agregar a carrito"),console.log(e)}})},a.deleteProductToCart=function(a,o){var r,i,l,c;return r=e("#frmDeleteProduct"+a).serializeArray(),l=e(o).closest(".contenTienda"),i=e(o).closest(".contenCategoria"),c=e(l).children(".contenCategoria"),1===c.length?e(l).remove():e(i).remove(),loading(!0),console.log(r),e.ajax({type:"post",url:t+"/carrito/eliminar",dataType:"json",data:r,success:function(a){return loading(!1),a.productos.length>0?(u(a.productos),e("#subtotal").html("$"+a.subtotal),e("#total").html("$"+a.total),console.log(a.envioGratis),a.envioGratis?(e("#envioGratis").removeClass("hide"),e("#envioGratis").show()):e("#envioGratis").hide()):n.location.href=t+"/carrito/detalle",console.log(a)},error:function(e){return loading(!1),console.log("Fallo al intentar eliminar"),console.log(e)}})},a.updateQuantity=function(a,o){var n,r,i;return loading(!0),r='[id="frmUpdateQuantity'+a+'"]',n=e(r).serializeArray(),i=parseInt(n[2].value),null!==o&&("-"===o.value&&(i-=1),"+"===o.value&&(i+=1)),n[2].value=i,e.ajax({type:"post",url:t+"/carrito/actualizarCantidad",dataType:"json",data:n,success:function(o){var t;return loading(!1),o.productos.length&&(u(o.productos),t='[id="cantidad'+a+'"]',e(t).val(i),e("#subtotal").html("$"+o.subtotal),e("#total").html("$"+o.total),o.envioGratis?(e("#envioGratis").removeClass("hide"),e("#envioGratis").show()):e("#envioGratis").hide()),console.log(o)},error:function(e){return loading(!1),console.log("Fallo al intentar actualizar la cantidad"),console.log(e)}})},u=function(a){var o;if(o="",e("#cart_count").text(0),e("#cantidadProductos a").attr("href","#"),a.length>0)return e(".boxCarritoCont").html(o),e.each(a,function(a,t){var n;if(n='[id="lblProducto'+t.talla+"-"+t.id+'"]',o+='<article class="caja__product"><div class="fila_producto"><div class="bcp_producto"><div class="contImg"><a href="/producto/'+t.id+"/"+t.datosAnalytics+'"><img src="'+t.foto+'"></a></div><div class="contInfo"><a href="/producto/'+t.id+"/"+t.datosAnalytics+'"><p class="producto">'+t.nombre+'</p></a><div class="info"><p>Vendido por: '+t.selledBy+"</p><p>cantidad: "+t.carritoCantidad+" </p></div></div></div></div></article>",e(n).length)return!0!==t.pull_traffic&&t.stock>=t.carritoCantidad?e(n).html(t.nombre):e(n).html('<span style="color: #F6A623">El producto '+t.nombre+" ya se agotó. Se volverá activar cuando tenga inventario.</span>")}),e("#cart_count").text(a.length),e("#articulosCarrito").text(a.length),e("#cantidadProductos a").attr("href",t+"/carrito/detalle"),e("#botonComprarPreview").attr("href",t+"/carrito/valida-caja"),e(".boxCarritoCont").html(o)},a.buyNow=function(e){var a;return console.log(e),loading(!0),"home"===e?(a=i(),a.done(function(e){return loading(!1),n.location.href=t+"/carrito/detalle"})):(a=l(!1),a.done(function(e){return loading(!1),n.location.href=t+"/carrito/detalle"}))},a.agregarProductoListaDeseosRapido=function(a){var r,i;return r=e("#"+a).serializeArray(),r[3]={name:"id",value:r[0].value},r[4]={name:"c",value:1},console.log(r),ModuleWishList.WishList.wishListeliminar(r[0].value),i=o(r,!1),i.done(function(e){return loading(!1),n.location.href=t+"/carrito/detalle"})},a.prepareProductFromHome=function(a,n,i){return e("#modal-vistaRapida").find("#idProducto").val(a),loading(!0),s().then(function(i){var l,c;return c=e.inArray(a,i),c<0?n?e.ajax({type:"GET",url:t+"/producto/getColorTallaHome/"+a,dataType:"json",success:function(a){var o,t,n,i,l,c,s,d,u,p;if(e("#comprar,#modalLinkDetalle2,.buy1cl,.tituloVistaRapida,.vistaR-Prod,#modalDescripcion,#modalPrecio").css("display","none"),e("#modal-vistaRapida").attr("class","vistaRapidaCarrito"),e("#modalTitulo").html('<a href="/producto/'+a.id+'/">'+a.nombre+"</a>"),a.tallaColor.sears_productos_color){c="",s="",n=1,d=a.tallaColor.sears_productos_color;for(t in d){u=d[t],c+="<option value='"+t+"'>"+t+"</option>",o=new Array;for(l in u)p=u[l],1===n&&(s+="<option value='"+p.skuHijo+"'>"+p.tsize+"</option>"),o[p.skuHijo]=p.tsize;r[t]=o,n+=1}i='<div class="boxColor"><span>Color</span><div class="opc_colors"><select name="color" id="color" required="required" onchange="ModuleCarrito.Carrito.getSizesFromColor(this.value)">'+c+'</select></div></div><div class="boxTallas"><span>Tallas</span><div class="opc_sizes"><select name="talla" id="talla" class="campo required">'+s+"</select></div></div>",e("#opcTalla").html(i),e.fancybox.open({href:"#modal-vistaRapida",titlePosition:"inside",transitionIn:"none",transitionOut:"none"})}return loading(!1),loading(!1),console.log(error)}}):(l={},l.c=1,l.id=a,o(l),e(".box__carrito").addClass("box-visible")):(e.fancybox.open("#modal-carrito-producto-duplicado"),loading(!1))})},s=function(){return e.ajax({type:"GET",url:"/carrito/getIdsArray/",dataType:"json",success:function(e){return console.log("incarrito"+e),e},error:function(e){return console.log("error incarrito")}})},a.quickView=function(a){return e("#modal-vistaRapida").find("#idProducto").val(a),e.ajax({type:"GET",url:t+"/producto/getColorTallaHome/"+a,dataType:"json",beforeSend:function(){return loading(!0)},success:function(a){var o,t,n,i,l,c,s,d,u,p,m,f,g,v,h,C,y,b;if(e(".agr-carr,#comprarf,#comprar,#modalLinkDetalle2,.buy1cl,.tituloVistaRapida,.vistaR-Prod,#modalDescripcion,#modalPrecio").css("display",""),e("#modal-vistaRapida").removeClass("vistaRapidaCarrito"),e("#modal-vistaRapida").find("#modalTitulo").text(a.nombre),a.tallaColor.sears_productos_color){p="",m="",n=1,v=a.tallaColor.sears_productos_color;for(t in v){h=v[t],p+="<option value='"+t+"'>"+t+"</option>",o=new Array;for(s in h)b=h[s],1===n&&(m+="<option value='"+b.skuHijo+"'>"+b.tsize+"</option>"),o[b.skuHijo]=b.tsize;r[t]=o,n+=1}c='<div class="boxColor"><span>Color</span><div class="opc_colors"><select name="color" id="color" required="required" onchange="ModuleCarrito.Carrito.getSizesFromColor(this.value)">'+p+'</select></div></div><div class="boxTallas"><span>Tallas</span><div class="opc_sizes"><select name="talla" id="talla" class="campo required">'+m+"</select></div></div>",console.log(v),Object.keys(v).length>0?(e("#opcTalla").css("display","block"),e("#opcTalla").html(c)):(e("#opcTalla").css("display","none"),e("#color").empty(),e("#talla").empty())}d=300,i=l="",g=a.fotos;for(s in g)y=g[s],u=y,"3496"===a.tienda.id&&(u=y.replace("/120/","/1200/")),u=proxyImagenes(y),i+='<li><img src="'+u+'"></li>',l+='<a data-slide-index="'+s+'" href="#"><img src="'+u+'"></a>';return e("#carouselVR").children().remove(),e("#carouselVR").append(i),e("#bx-pager_carouselVR").html(l),addSlider("carouselVR",4,""),e("#bx-pager_carouselVR").slick("removeSlide",null,null,!0),e("#bx-pager_carouselVR").html(l),addSlider("carouselVR",4,""),C=a.descripcionHome.length>7?a.descripcionHome:a.atributos,e("#modalDescripcion").html(C.substr(0,d)+'... <a href="/producto/'+a.id+'/" name="modalLinkDetalle" id="modalLinkDetalle">Ver más &gt;</a>'),f=a.precio.toLocaleString("en"),e("#modalPrecio").text("$"+f),e("#modalLinkDetalle2").attr("href","/producto/"+a.id+"/"),e.fancybox.open({href:"#modal-vistaRapida",titlePosition:"inside",transitionIn:"none",transitionOut:"none"}),loading(!1)},error:function(e){return loading(!1),console.log("Fallo al intentar obtener las tallas y colores en el carro del home"),console.log(e)}})},a.getSizesFromColor=function(a){var o,t,n,i;o="",e("#talla").empty(),t=r[a];for(i in t)n=t[i],o+="<option value='"+i+"'>"+n+"</option>";return e(o).appendTo("#talla")},d=function(e){var a,o,t,n,r;for(r=e+"=",o=document.cookie.split(";"),t=0,n=o.length;t<n;t++){for(a=o[t];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(r))return a.substring(r.length,a.length)}return null},p=function(){var a,o,t,n,r,i,l,c,s,d;return ScarabQueue.push(["cart",[]]),document.getElementById("box__login"),document.getElementById("logeado").value=0,t=document.createElement("dl"),t.setAttribute("class","logIn"),r=document.createElement("dt"),l="?redirect="+window.location.href,a=document.createElement("a"),a.setAttribute("class","redBtn btn-login"),a.href="/login"+l,c=document.createTextNode("Ingresar"),a.appendChild(c),n=document.createElement("dd"),i=document.createElement("p"),d=document.createTextNode("¿Eres Nuevo?"),i.appendChild(d),o=document.createElement("a"),o.setAttribute("class","standardBtn btn-registro"),o.href="/loginregistro"+l,s=document.createTextNode("Regístrate"),r.appendChild(a),t.appendChild(r),o.appendChild(s),n.appendChild(i),n.appendChild(o),t.appendChild(n),e("#box__login").html(t),!0},function(){return e(".box__carrito").removeClass("box-visible")},a.ajaxLogin=function(){var a,o,n;return a=d("token_login"),o=d("token_cart"),null===a&&null===o?void p():(c(),e.Deferred(),n=t+"/login/login/checkLogin?tklgn="+a,e.ajax({type:"get",url:n,dataType:"json",cache:!0,success:function(a){var o,t,n,r,i,l,c,s,d,u,f,g,v,h,C,y,b,x,P,w;return e("#box__login").html(""),v=document.getElementById("box__login"),document.getElementById("wishlist_snippet"),!1===a.login?p():(m(),e("#wishlist_snippet").css("display","flex"),e(".blueHeart2").css("visibility","visible"),e(".wishlistButton").removeClass("hidden"),e("#addWishList").removeClass("hidden"),ScarabQueue.push(["setEmail",a.email]),ScarabQueue.push(["cart",a.emarcys]),ScarabQueue.push(["go"]),document.getElementById("logeado").value=1,e("#validMail").val(a.email),e("#validMail").prop("hidden","true"),e("#validMail").prop("readonly","true"),e("#checkAgotado").prop("checked","none"),validaCheckClick(),w=document.getElementById("userInformation"),s="<span>Bienvenido</span>"+a.username,w.innerHTML="",w.innerHTML=s,l=document.createElement("dl"),d=document.createElement("dt"),o=document.createElement("a"),o.href="/mi-cuenta/mis-datos/",C=document.createTextNode("Entrar a mi cuenta"),o.appendChild(C),d.appendChild(o),g=document.createElement("dt"),n=document.createElement("a"),n.href="/mi-cuenta/mis-pedidos/1/estatus/2/",b=document.createTextNode("Revisar mis pedidos"),n.appendChild(b),g.appendChild(n),document.createElement("dt"),r=document.createElement("a"),r.href="/mi-cuenta/listadeseos/",l.appendChild(d),l.appendChild(g),!0===a.isCampaniaCompartido&&(u=document.createElement("dt"),t=document.createElement("a"),t.href="/mi-cuenta/cupon/",console.log("cupon ",t.href),t.href=t.href.replace(/^http:/,"https:"),y=document.createTextNode("Invitar a un amigo"),t.appendChild(y),u.appendChild(t),l.appendChild(u)),c=document.createElement("dl"),c.setAttribute("class","logOut"),c.setAttribute("style","display: block !important;"),f=document.createElement("dt"),h=document.createElement("p"),P=document.createTextNode("¿ No eres "+a.username+" ?"),h.appendChild(P),i=document.createElement("a"),i.setAttribute("onclick","cerrar_sesion(event)"),i.href="#cerrar-sesion",x=document.createTextNode("Cerrar mi sesión"),i.appendChild(x),f.appendChild(h),f.appendChild(i),c.appendChild(f),v.appendChild(l),v.appendChild(c),e("body").addClass("wishlistLogin")),e(".btn-login").on("click",function(){e(".loginTabs .loginMenu > li").removeClass("select"),e(".loginSection > li").removeClass("show"),e(".loginTabs .loginMenu > li:eq(0)").addClass("select"),e(".loginSection > li:eq(0)").addClass("show")}),e(".btn-registro").on("click",function(){e(".loginTabs .loginMenu > li").removeClass("select"),e(".loginSection > li").removeClass("show"),e(".loginTabs .loginMenu > li:eq(1)").addClass("select"),e(".loginSection > li:eq(1)").addClass("show")}),e(".loginTabs .loginMenu > li").on("click",function(){var a;return a=e(this).index(),e(".loginTabs .loginMenu > li").removeClass("select"),e(".loginSection > li").removeClass("show"),e(this).addClass("select"),e(".loginSection > li:eq("+a+")").addClass("show")})},beforeSend:function(){var a,o,t,n,r;if(e("#box__login").is(":empty"))return t=document.getElementById("box__login"),a=document.createElement("dl"),a.setAttribute("class","logIn"),o=document.createElement("dd"),n=document.createElement("p"),r=document.createTextNode("¡Estamos validando tu acceso!"),n.appendChild(r),o.appendChild(n),a.appendChild(o),t.appendChild(a)}}))},m=function(){loading(!0),e.ajax({type:"GET",url:"/mi-cuenta/listadeseos/getIdsProductos",dataType:"json",success:function(a){return e(".wishlistButton").each(function(){return e.each(a,function(a,o){var t;return t='[data-id="'+o+'"]',e(t).addClass("active")})})},complete:function(){return loading(!1)},error:function(e){return loading(!1)}}),loading(!0)},function(){var a,o;return o=e.Deferred(),a={cantidad:0,color:1},e.ajax({url:"/mi-cuenta/listadeseos/listar/",type:"post",dataType:"json",cache:!1,data:a,success:function(a){var t,n,r,i,l,c,s,d,u;if(e("#paEnviarExistencia").css("display","block"),!0===a.data.login){for(e(".blueHeart2").css("visibility","visible"),e(".wishlistButton").removeClass("hidden"),e("#addWishList").removeClass("hidden"),i="",r=0;r<a.data.productos.length;)i+=a.data.productos[r].id+",",r++;e("#wishlist_count").text(a.data.productos.length),e("#idsProducto").val(i),marcaCorazonLista()}else{if(i=[],void 0!==(s=JSON.parse(localStorage.getItem("idsProductos")))&&null!==s)for(r=0;r<s.length;)u=i.indexOf(s[r]),-1!==u&&i.splice(u,1),i.push(s[r]),r++;localStorage.setItem("idsProductos",JSON.stringify(i)),e("#idsProducto").val(i),e("#idsProductos").val(i),e("#wishlist_count").text(i.length),marcaCorazonLista()}for(n=document.getElementById("idsProducto").value,l=n.split(","),t=document.querySelectorAll(".blueHeart2"),d=0;d<l.length;){for(r=0;r<t.length;){-1!==t.item(r).getAttribute("onclick").indexOf(l[d])&&""!==l[d]&&(c=t.item(r).parentNode,c.className+=" blueHeart");break}d++}return o.resolve()},error:function(){return loading(!1),console.log("Ocurrió un error al consultar lista de deseos."),o.fail()}}),o.promise()},a.addcartFromWishList=function(a){return e("#modal-vistaRapida").find("#idProducto").val(a),loading(!0),s().then(function(r){var i,l;return l=e.inArray(a,r),l<0?(i={},i.c=1,i.id=a,ModuleWishList.WishList.wishListeliminar(a),r=o(i,!1),r.done(function(e){return loading(!1),n.location.href=t+"/carrito/detalle"})):(e.fancybox.open("#modal-carrito-producto-duplicado"),loading(!1))})},a}(),o.Carrito=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleCarrito&&null!==ModuleCarrito?ModuleCarrito:{},t.ModuleCarrito=o,a=function(){function a(){}return a.start=function(){return e(function(){o.Carrito.init(),o.ListaDeseos.init(),ModuleBarraCodigoPostal.BarraCodigoPostal.start(),ModulePopUpBarraCP.PopUpBarraCP.start()})},a.startLoading=function(){return e(function(){o.Carrito.initLoading(),o.ListaDeseos.init(),ModuleBarraCodigoPostal.BarraCodigoPostal.start(),ModulePopUpBarraCP.PopUpBarraCP.start()})},a}(),o.App=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleDatalayer&&null!==ModuleDatalayer?ModuleDatalayer:{},t.ModuleDatalayer=o,a=function(){function a(){}var o;return a.start=function(){return e(function(){o()})},o=function(){},a.setEmail=function(e){var a;console.log("dataLayer email:"+e),a=a||[],""!==e&&"undefined"!==e?a.push({emailAjax:e,event:"correoAjax"}):a.push({emailAjax:"",event:"correoAjax"})},a.setHome=function(){dataLayer.push({PageType:"HomePage"})},a.setBusqueda=function(e,a,o,t,n,r,i){dataLayer.push({PageType:"ListingPage",idCategoria:e,ecomm_pagetype:"busqueda",ecomm_category:a,ProductIDList:o,BusquedaClaro20:t,QuisisteDecir20:n,numResultados20:r,categoriaClaro20:e,Query:t,firstResults:o,ecommerce:{currencyCode:"MXN",impressions:i}})},a.setCategoria=function(e,a,o,t,n){dataLayer.push({PageType:"ListingPage",idCategoria:e,ecomm_pagetype:"category",ecomm_category:a,ProductIDList:o,numResultados20:t,categoriaClaro20:e,firstResults:o,ecommerce:{currencyCode:"MXN",impressions:n}})},a.setProducto=function(e,a,o,t,n){dataLayer.push({idProducto:e,precioProducto:a,categoria:o,ecomm_pagetype:"product",ecomm_prodid:e,ecomm_totalvalue:a,ecomm_category:o,PageType:"ProductPage",ProductID:e,productoFB:t,stageFB:n})},a.setCarrito=function(e,a,o,t,n,r){dataLayer.push({idProducto:e,totalCarrito:a,ecomm_pagetype:"cart",ecomm_prodid:e,ecomm_totalvalue:a,PageType:"BasketPage",ProductBasketProducts:o,carritoFB:t,subtotalFB:n,purchaseEventsMkt:r,event:"checkout",ecommerce:{checkout:{actionField:{step:1,option:"Web"},products:o}}})},a.setCheckout=function(e){dataLayer.push({idProducto:e})},a.setCheckoutStep2=function(){dataLayer.push({event:"checkout",ecommerce:{checkout:{actionField:{step:2,option:"Web"}}}})},a.setCheckoutStep3=function(e){dataLayer.push({formaPago:e,event:"checkout",ecommerce:{checkout:{actionField:{step:3,option:"Web"}}}})},a.setPurchase=function(e,a,o,t,n,r,i){dataLayer.push({idProducto:t,totalCarrito:e,ecomm_pagetype:"purchase",ecomm_prodid:r,ecomm_totalvalue:e,PageType:"TransactionPage",emailAjax:a,userId:i,ProductTransactionProducts:n,TransactionID:o,event:"checkout",ecommerce:{checkout:{actionField:{step:4,option:"Web"}}}})},a}(),o.Eventos=a}.call(this),function(){var e,a,o,t,n;n="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleEmarsys&&null!==ModuleEmarsys?ModuleEmarsys:{},n.ModuleEmarsys=o,t=null!=t?t:null,a=function(){function a(){}var o,n;return a.start=function(){return e(function(){o()})},o=function(){},a.getRecomendadosThankYouPage=function(a){return console.log("Entro a la funcion de recomendados"),console.log(a.proxyImages),t=a.proxyImages,a.testMode&&ScarabQueue.push(["testMode"]),ScarabQueue.push(["setEmail",a.correoCliente]),ScarabQueue.push(["cart",a.productos]),ScarabQueue.push(["purchase",{orderId:a.numeroPedido,items:a.productos}]),ScarabQueue.push(["recommend",{logic:"PERSONAL",containerId:a.idContenedor,templateId:"RelacionadoNav_nuevo",limit:a.numeroItems,success:n}]),ScarabQueue.push(["go"]),e(window).on("load",function(){e("#"+a.idContenedor).bxSlider({minSlides:1,moveSlides:5,maxSlides:30,useCSS:!0,pause:6e3,auto:!1,adaptativeHeight:!0,slideWidth:260,slideMargin:2,pager:!1})})},n=function(e,a){var o,n,r,i;for(console.log("tratamiento de imagenes"+t),o=n=0,i=e.page.products.length;0<=i?n<i:n>i;o=0<=i?++n:--n)r=e.page.products[o],r.title=normalizarCaracter(r.title),r.precio=r.price.toLocaleString("en"),r.msrp_sub=r.msrp.toLocaleString("en"),r.categoria2=r.categoria1="",r.mensualidades="",null!==r.c_mensualidades&&""!==r.c_mensualidades&&(r.mensualidades=r.c_mensualidades),null!==r.category&&(r.categoria1=r.category,r.categoria2=normalizar(r.category.split(">")[0]),t&&(r.imagen=r.image.replace("http://imagenes.sanborns.com.mx/",t+"/imagenes-sanborns-ii/"),r.imagen=r.imagen.replace("https://imagenes.sanborns.com.mx/",t+"/imagenes-sanborns-ii/"),r.imagen=r.imagen.replace("http://medios.plazavip.com/",t+"/medios-plazavip/"),r.imagen=r.imagen.replace("https://medios.plazavip.com/",t+"/medios-plazavip/"),r.imagen=r.imagen.replace("https://medios-plazavip.sears.com.mx/",t+"/medios-plazavip/"),r.imagen=r.imagen.replace("http://medios-plazavip.sears.com.mx/",t+"/medios-plazavip/"),r.imagen=r.imagen.replace("http://imagenes.claroshop.com/",t+"/imagenes-claroshop/"),r.imagen=r.imagen.replace("https://imagenes.claroshop.com/",t+"/imagenes-claroshop/"),r.imagen=r.imagen.replace("https://tienda.telmex.com",t+"/tienda-telmex/"),r.imagen=r.imagen.replace("http://img.plazavip.com/",t+"/img-plazavip/"),r.imagen=r.imagen.replace("https://img.plazavip.com/",t+"/img-plazavip/"),r.imagen=r.imagen.replace("http://imgs.plazavip.com/",t+"/imgs-plazavip/"),r.imagen=r.imagen.replace("https://imgs.plazavip.com/",t+"/imgs-plazavip/")));return a(e)},a}(),o.Index=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,"undefined"!=typeof ModuleSepomex&&null!==ModuleSepomex&&ModuleSepomex,o="undefined"!=typeof ModuleFacturas&&null!==ModuleFacturas?ModuleFacturas:{},t.ModuleFacturas=o,a=function(){function a(){}var o,n,r;return a.start=function(){return e(function(){console.log("iniciando el modulo de facturacion Datosfacturas..."),o()})},o=function(){return console.log("iniciando facturacion..."),e("#codigopostal").click(ModuleFacturas.DatosFacturacion.getCP),e("#guardar").click(n),e("#actualizar").click(r)},n=function(a){var o;return a.preventDefault(),o=e("#formDatosFacturas").serialize(),console.log(o),loading(!0),e.ajax({url:"/mi-cuenta/datos-facturacion/guardar",method:"POST",data:o,cache:!1,beforeSend:function(){loading(!0)},success:function(e){return console.log(e),ModuleFacturas.DatosFacturacion.focusValidator(),loading(!1),e.status?(alert(e.msg),void(t.location.href="/mi-cuenta/datos-facturacion")):(console.log("error"+e.msg),void ModuleFacturas.DatosFacturacion.validator(e.errors))},error:function(e){loading(!1),console.log(e)}})},r=function(a){var o,n;return a.preventDefault(),n=e("#actualizar").data("id"),o=e("#formDatosFacturas").serialize(),console.log(n),loading(!0),e.ajax({url:"/mi-cuenta/datos-facturacion/actualizar/"+n,method:"POST",data:o,cache:!1,beforeSend:function(){loading(!0)},success:function(e){return console.log(e),ModuleFacturas.DatosFacturacion.focusValidator(),loading(!1),e.status?(alert(e.msg),void(t.location.href="/mi-cuenta/datos-facturacion")):(console.log("error"+e.msg),void ModuleFacturas.DatosFacturacion.validator(e.errors))},error:function(e){loading(!1),console.log(e)}})},a.getCP=function(a){var o;if(a.preventDefault(),o=e("#cp").val(),parseInt(o)&&5===o.length)return loading(!0),ModuleSepomex.Sepomex.serviceSepomex(o).then(function(a){var o;return a.estatus?""!==a.datacp.estado.d_estado?(e("#estado").val(a.datacp.estado.d_estado),a.datacp.municipios.length>0&&(e("body").off("change","#municipio"),o="",e.each(a.datacp.municipios,function(e,a){return o+="<option value="+a.d_mnpio+">"+a.d_mnpio+"</option>"}),e("#municipio").html(""),e("#municipio").html(o)),a.datacp.colonia.length>0&&(e("body").off("change","#colonia"),o="",e.each(a.datacp.colonia,function(e,a){return o+="<option value="+a.d_asenta+">"+a.d_asenta+"</option>"}),e("#colonia").html(""),e("#colonia").html(o)),loading(!1)):(e("#cpostal, #estado").val(""),alert("En nuestros registros no encontramos tu cp, intenta con otro"),loading(!1)):(alert("En nuestros registros no encontramos tu cp, intenta con otro"),e("#cpostal, #estado").val(""),loading(!1)),loading(!1)});console.log("El cp no es valido...")},a.validator=function(a){return e.each(a,function(a,o){var t;t=e('input[name="'+a+'"]'),t.next("span").remove(),t.addClass("error"),e("<span>"+o+"</span>").insertAfter(t)})},a.focusValidator=function(a){return e("input").focus(function(){e(this).removeClass("error"),e(this).next("span").remove()})},a}(),o.DatosFacturacion=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleCarrito&&null!==ModuleCarrito?ModuleCarrito:{},t.ModuleCarrito=o,a=function(){function a(){}var o,t;return a.init=function(){return e(".cargaListaDeseos").click(o)},o=function(){return loading(!0),ModuleCarrito.Carrito.ajaxLogin().done(function(a){var o;if("1"===e("#logeado").val()){if(t())return window.location="/mi-cuenta/listadeseos/"}else if(void 0!==(o=JSON.parse(localStorage.getItem("idsProductos")))&&null!==o)return e("#idsProducto").val(o),e("#idsProductos").val(o),e("#formDeseos").submit()})},t=function(){var a;return a=JSON.parse(localStorage.getItem("idsProductos")),void 0!==a&&null!==a&&a.length>0&&(console.log("entra ajax"),e.ajax({type:"post",url:"/mi-cuenta/listadeseos/insertWishList/",data:{idsProductos:a},dataType:"json",success:function(e){return console.log("succes"),"success"===e.respuesta.status&&(localStorage.removeItem("idsProductos"),!0)},error:function(){return console.log("error"),!1}})),!0},a.tallaColor=function(a,o,t){var n,r,i,l,c,s,d,u,p,m;for(n=e(a).parents("article"),n.find(".boxTallas").removeClass("hidden"),i=t,console.log(i),l="",n.find(".opc_sizes #talla").html(""),c=0,d=i.length;c<d;c++)if(r=i[c],console.log(r.color===o),r.color===o){for(console.log("correcto"),console.log(r.sizes),p=r.sizes,s=0,u=p.length;s<u;s++)m=p[s],console.log(m),l+='<option value="'+m.size+"|"+m.stock+"|"+m.sku+'">'+m.size+"</option>","N/A"===m.size.toUpperCase()&&n.find(".boxTallas").addClass("hidden");break}l&&(n.find(".opc_sizes #talla").html(l),console.log(n.html()),console.log(e(a).html()))},a}(),o.ListaDeseos=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleLocalStorage&&null!==ModuleLocalStorage?ModuleLocalStorage:{},t.ModuleLocalStorage=o,a=function(){function a(){}var o;return a.start=function(){return e(function(){o()})},o=function(){},a.readCookie=function(e){var a,o,t,n,r;for(r=e+"=",o=document.cookie.split(";"),t=0,n=o.length;t<n;t++){for(a=o[t];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(r))return a.substring(r.length,a.length)}return null},a.getData=function(e){return store.get(e)},a.setData=function(e,a){return store.set(e,a)},a.clearAllData=function(){return store.clearAll()},a.clearData=function(e){return store.remove(e)},a.getClient=function(){return store.get("lsCliente")},a.getCart=function(){return store.get("lsCarrito")},a.getDireccion=function(){return store.get("lsDireccion")},a.getPostalCode=function(){return store.get("lsCodigoPostal")},a}(),o.LocalStorage=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleLogin&&null!==ModuleLogin?ModuleLogin:{},t.ModuleLogin=o,a=function(){function a(){}var o,t,n;return a.start=function(){return e(function(){o()})},o=function(){return e(".registro__usuarios .btn-google").click(function(a){var o;return o=e(a.target),a.preventDefault(),(!o.data("block")||+new Date-o.data("block")>400)&&n(),o.data("block",+new Date)}),e(".registro__usuarios .btn-facebook").click(function(a){var o;return o=e(a.target),a.preventDefault(),(!o.data("block")||+new Date-o.data("block")>400)&&t(),o.data("block",+new Date)})},n=function(a){return e("#loginPluginDiv div [gigid='googleplus']").parent().trigger("click")},t=function(a){return e("#loginPluginDiv div [gigid='facebook']").parent().trigger("click")},a}(),o.SocialLogin=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleCuenta&&null!==ModuleCuenta?ModuleCuenta:{},"undefined"!=typeof ModuleSepomex&&null!==ModuleSepomex&&ModuleSepomex,"undefined"!=typeof ModuleValida&&null!==ModuleValida&&ModuleValida,t.ModuleCuenta=o,a=function(){function a(){}var o,n,r,i,l,c,s,d,u;return a.start=function(){return e(function(){r()})},r=function(){return e("#btn_guardaMiCuenta").click(n),e(".setDireccionPredeterminada").click(s),e("#colonia").change(l),e("#municipio").change(c),e("#codigopostal").click(i),e("#btnContinuar").click(u),e("#cpostal").change(i),e("#numeroCard").blur(function(e){d(this.value)}),e("#btn_guarda").click(function(e){return e.preventDefault(),o()}),e("#btn_guardaPass").click(function(e){return e.preventDefault(),cambiarContrasena()}),e(".mod_contentMiCuenta .editar").click(function(a){var o;return a.preventDefault(),o=e(this),o.hide(),o.parent().parent().find(".contentCard").hide(),o.parent().parent().find(".editCard").show(),e("#loginMessage").hide()}),e(".mod_contentMiCuenta .editCard .btn-gris").click(function(a){var o;return a.preventDefault(),o=e(this),o.parent().parent().parent().find(".editar").show(),o.parent().parent().parent().find(".contentCard").show(),o.parent().parent(".editCard").hide(),e("html,body").animate({scrollTop:0},900)}),e(".contRadio").click(function(a){var o,t;if(a.preventDefault(),o=e(this),t=o.find('input[type="radio"]'),e(".contRadio").removeClass("active"),t.length>=1)return console.log("radio"+t),o.find("input").prop("checked",!0),o.addClass("active")}),e("#frm_misdatos").validate(function(){return{rules:{field:{required:!0,minlength:6}}}}),e("#editar-cuenta").click(function(){return e("#frm_misdatos").hide(),e("#formularioDatos").show(),e("#editar-personales").hide(),e("#editar-contrasena").show()}),e("#recuperar-contrasena").click(function(){return e("#formularioDatos").hide(),e("#frm_misdatos").show(),e("#editar-contrasena").hide(),e("#editar-personales").show()})},u=function(a){var o;if(e("#errorCPcuenta").html("").hide(),a.preventDefault(),!ModuleValida.ValidaFormulario.validaFormulario("agregarDireccion"))return!1;o=e("#agregarDireccion").serializeObject(),o.telefono=o.celular,o.ajax=1,e.ajax({url:"/mi-cuenta/direcciones-envio/procesos/agregar",type:"POST",dataType:"json",cache:!1,data:o,success:function(a){return console.log(a),a.estatus?"pagoClic"===a.origen?t.location.href="/mi-cuenta/pago-en-un-clic/GuardaPagoClicDir/"+a.dir:t.location.href="/mi-cuenta/direcciones-envio/?barraCp=1":(e("#errorCPcuenta").html(a.error).show(),e("html, body").animate({scrollTop:e("#contCP").offset().top-30},700),loading(!1))},error:function(){}})},i=function(){var a,o;return e("#errorCPcuenta").html("").hide(),loading(!0),o="",a=e("#cpostal").val(),parseInt(a)&&5===a.length?e.when(ModuleSepomex.Sepomex.serviceSepomex(a)).then(function(a){return a.then(function(a){return console.log(a),a.estatus?""!==a.datacp.estado.d_estado?(e("#estado").val(a.datacp.estado.d_estado),e("#estado").attr("data-codigo",a.datacp.estado.c_estado),e("#colonia").removeAttr("disabled"),e("#estado").removeAttr("disabled"),e("#municipio").removeAttr("disabled"),e("#ciudad").removeAttr("disabled"),e("#municipioContainer span").remove(""),e("#municipio").remove(),a.datacp.municipios.length>0?(e("body").off("change","#municipio"),e("#municipioContainer").append('<span class="select"><select name="municipio" id="municipio" required="required" style="width: 500px"></select></span>'),e.each(a.datacp.municipios,function(e,a){return o+='<option value="'+a.d_mnpio+'">'+a.d_mnpio+"</option>"}),o+='<option value="none"> Me gustaría escribirla por mi mismo.</option>',e("#municipio").html(""),e("#municipio").html(o),
e("#municipio").change(c)):(e("#municipioContainer span").remove(),e("#municipioContainer").append("<input type='text' maxlength='35' name='municipio' id='municipio' value='' />")),e("#coloniaContainer span").remove(""),e("#colonia").remove(),a.datacp.colonia.length>0?(e("body").off("change","#colonia"),e("#coloniaContainer").append("<span class=\"select\"><select name='colonia' id='colonia' required='required' style='width: 500px'></select></span>"),o="",e.each(a.datacp.colonia,function(e,a){return o+='<option value="'+a.d_asenta+'">'+a.d_asenta+"</option>"}),o+='<option value="none"> Me gustaría escribirla por mi mismo.</option>',e("#colonia").html(""),e("#colonia").html(o),e("#colonia").change(l)):(e("#coloniaContainer span").remove(),e("#coloniaContainer").append("<input type='text' maxlength='35' name='colonia' id='colonia' value='' />")),""!==a.datacp.ciudad.d_ciudad&&e("#ciudad").val(a.datacp.ciudad.d_ciudad),loading(!1)):(e("#cpostal").val(""),e("#estado").val(""),e("#errorCPcuenta").html("En nuestros registros no encontramos tu cp, intenta con otro").show(),loading(!1)):(e("#errorCPcuenta").html("En nuestros registros no encontramos tu cp, intenta con otro").show(),e("#cpostal, #estado").val(""),loading(!1))}).catch(function(e){return console.log(e),loading(!1)})}):loading(!1)},d=function(a){var o;return o=/^(0[1-3]|06|09|10|16|1[2-3]|1[8-9]|24|26|27|3[0-1]|35|37|39|43|44|46|49|5[0-1]|56|60|6[2-3]|68|70|73|74|79|8[0-1]|85|87|90|92|94|96|98|2[1-3]){1}[0-9*]{10}$/,o.test(a)?(e("#vencimientoCuenta").hide(),e("#mes-tarjeta").removeAttr("required"),e("#ano-tarjeta").removeAttr("required"),e("#tipoCard").val("sears")):(e("#vencimientoCuenta").show(),e("#mes-tarjeta").attr("required","required"),e("#ano-tarjeta").attr("required","required"),e("#tipoCard").val("otra"))},n=function(a){if(u=ModuleValida.ValidaFormulario.validaFormulario("formularioMicuenta"))return e("#formularioMicuenta").submit()},l=function(){var a,o;if(o="",a="","none"===e("#colonia").val())return o=e("#colonia").parent(),a=o.parent(),o.remove(),a.append('<input type="text" name="colonia" id="colonia" value="" pattern=".{5,50}" maxlength="50" minlength="5" required/>')},c=function(){var a,o;if(o="",a="","none"===e("#municipio").val())return o=e("#municipio").parent(),a=o.parent(),o.remove(),a.append('<input type="text" name="municipio" id="municipio" value="" pattern=".{5,50}" maxlength="50" minlength="5" required/>')},o=function(a){var o,t;if(u=ModuleValida.ValidaFormulario.validaFormulario("formularioDatos"),console.log(u),u)return o=e(this),o.parent().parent().parent().find(".editar").show(),o.parent().parent().parent().find(".contentCard").show(),o.parent().parent(".editCard").hide(),t=e("#formularioDatos").serializeObject(),loading(!0),e.ajax({url:"/mi-cuenta/actualizarMisDatos",type:"POST",dataType:"json",cache:!1,data:t,success:function(a){return loading(!1),console.log(a),a.estatus?(alert("Tus datos han sido actualizados"),window.location.href="/mi-cuenta/mis-datos"):(e("#notificacion").html(a.error),e.fancybox.open({href:"#notificacion"}))},error:function(e){return console.log("error"),loading(!1)}}),e("html,body").animate({scrollTop:0},900)},s=function(a){var o;return o={id:e(this).attr("data-id")},e.ajax({url:"/mi-cuenta/direcciones-envio/procesos/setDireccionPredeterminada",type:"POST",dataType:"json",cache:!1,data:o,success:function(e){if(console.log(e),e.estatus)return ModuleBarraCodigoPostal.BarraCodigoPostal.borrarDireccionFromLocalStorage()},error:function(e){return console.log("error"),loading(!1)}})},a}(),o.MiCuenta=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,"undefined"!=typeof ModuleFacturas&&null!==ModuleFacturas&&ModuleFacturas,o="undefined"!=typeof ModuleCuenta&&null!==ModuleCuenta?ModuleCuenta:{},t.ModuleCuenta=o,a=function(){function a(){}var o,t,n,r,i,l,c,s,d,u,p;return s=0,o="Gastos en general",a.start=function(){return e(function(){d()})},d=function(){return e(".module_miPedido .cont-btn .verMas").click(n),e(".module_miPedido .cont-btn .cerrar").click(t),e("#codigopostal").click(ModuleFacturas.DatosFacturacion.getCP),e("#guardar").click(p),e(".download-invoice").click(u),l()},l=function(){return e(".agregaFacturacion .save-datos").hide(),e(".linkFactura").on("click",function(){s=e(this).data("pedido"),e.fancybox.open({href:"#FacturacionModal",autoSize:!0,autoScale:!1})}),e(".thanksFacturacion .btn-rojo").on("click",function(){return e.fancybox.close(),location.reload(!0)}),e(".agregaFacturacion .btn-gris").on("click",function(){return e(".solicitaFacturacion").show(),e(".agregaFacturacion").hide(),e.fancybox.update()}),e(".agregaFacturacion .solicitar").on("click",function(){return p(s)}),e(".solicitaFacturacion .btn-rojo").on("click",function(){var a;return a=e(".datos-facturacion:checked").val(),console.log("click enviando solicitud..."+a),void 0===a?(alert("Debe seleccionar los datos de facturación"),!1):(p(s,a),e(".solicitarFacturacion").hide())}),e("#addData").on("click",function(){return e(".agregaFacturacion").show(),e(".solicitaFacturacion").hide(),e.fancybox.update()})},u=function(){return s=e(this).data("pedido"),loading(!0),e.ajax({url:"/mi-cuenta/datos-facturacion/getFacturas/"+s,method:"POST",cache:!1,beforeSend:function(){loading(!0)},success:function(a){var o;if(console.log(a),loading(!1),!a.status)return error.log("error"+a.msg),void alert(a.msg);o="<h3><strong>Descarga tus facturas.</strong></h3>",e.each(a.data,function(t,n){switch(o+='<div class="fieldset"><div class="contTiendaT"><h4>'+n.tienda+"</h4>",n.status){case 1:o+='<a href="/mi-cuenta/datos-facturacion/download/'+s+"/"+n.id+'" target="_blank" class="linkFactura"> Descargar factura </a>';break;case 2:o+='<span"> Pendiente </span>';break;case 3:o+='<a href="'+a.urlFacturacion+'" target="_blank" class="linkFactura"> Descargar factura </a>'}return o+="</div><ul>",e.each(n.productos,function(e,a){return o+="<li>"+a+"</li>"}),o+="</ul></div>"}),console.log(o),e(".descargaFacturacion").html(o),e.fancybox.open({href:"#FacturacionModalDescarga",autoSize:!0,autoScale:!1})},error:function(e){loading(!1),console.log(e)}})},p=function(a,t){var n;return null==t&&(t=0),console.log("datos facturacion id : "+t),console.log(a),0===t?c().then(function(e){return e.status?(t=e.data.id,console.log("Datos fiscales guardados id: "+t),r(a,t,o)):ModuleFacturas.DatosFacturacion.validator(e.errors)}):(n=e(".datosRFC select").val(),console.log(n),r(a,t,n))},r=function(a,o,t){return loading(!0),e.ajax({url:"/mi-cuenta/datos-facturacion/solicitarFactura",method:"POST",data:{idDatosFacturacion:o,pedido:a,concepto:t},cache:!1,beforeSend:function(){loading(!0)},success:function(a){return console.log(a),loading(!1),a.status?(e(".solicitaFacturacion").hide(),e(".agregaFacturacion").hide(),e(".thanksFacturacion").show(),void e.fancybox.update()):(error.log("error"+a.msg),void alert(a.msg))},error:function(e){loading(!1),console.log(e)}})},c=function(){var a;return a=e("#formDatosFacturas").serialize(),console.log(a),Promise.resolve(e.ajax({method:"POST",data:a,url:"/mi-cuenta/datos-facturacion/guardar",dataType:"json",error:function(e){return console.log("error")}}))},n=function(){var a;return a=e(this),a.parent().parent().parent().addClass("detalle")},t=function(){var a;return a=e(this),a.parent().parent().parent().removeClass("detalle")},a.buscarByNumPedido=function(a){var o;if(""!==(o=e.trim(e("#strBusquedaPedido").val()))&&i(o))return loading(!0),window.location.href=a+o},i=function(e){return/^-?[\d.]+(?:e-?\d+)?$/.test(e)},a.aplicarOrden=function(){var a;if(""!==(a=e("#cboOrdenPedidos").val()))return loading(!0),window.location.href=a},a}(),o.MisPedidos=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleT1Pagos&&null!==ModuleT1Pagos?ModuleT1Pagos:{},"undefined"!=typeof ModuleValida&&null!==ModuleValida&&ModuleValida,t.ModuleT1Pagos=o,a=function(){function a(){}var o,t,n,r,i,l,c,s;return a.start=function(){return e(function(){n()})},n=function(){e("#getTarjetas").val()&&e.when(r()).then(function(){return e(".moduleAgregarFP").hide(),e("a.editar").on("click",function(a){return a.preventDefault(),e(".ventana_emergente").hide(),e(".moduleAgregarFP").hide(),e(this).parent().parent().parent().children(".moduleAgregarFP").show()}),e(".btn-gris").on("click",function(){return e(".moduleAgregarFP").hide()})}),e("#guardaTarjeta").click(o)},t=function(){return e.ajax({url:"/mi-cuenta/formas-pagoT1/createCliente",type:"GET",dataType:"json",cache:!1,success:function(a){return console.log(a),e("#t1Cliente").val(a.data.clienteT1),o()},error:function(){return e("html, body").animate({scrollTop:0},"slow"),e("#errorTarjeta").html('<div class="ico-alerta"></div><p>T1: Ocurrió un error, por favor intenta de nuevo más tarde.</p>'),e("#errorTarjeta").show()}})},o=function(){var a;return ModuleValida.ValidaFormulario.validaFormulario("formularioMicuenta")?""===e("#t1Cliente").val()?t():(a={nombre:s(e("#nombre").val()),pan:e("#numeroCard").val().trim(),cvv2:123,expiracion_mes:e("#mes-tarjeta").val().trim(),expiracion_anio:e("#ano-tarjeta").val().trim(),default:!0,cargo_unico:!1,cliente_id:e("#t1Cliente").val(),direccion:{ciudad:s(e("#ciudad").val()),cp:e("#cpostal").val(),estado:e("#estado").attr("data-codigo"),municipio:e("#municipio").val(),pais:"MEX",linea1:s(e("#direccion").val()),linea2:e("#num_ext").val()+","+e("#num_int").val()+","+e("#colonia").val()}},""===a.direccion.ciudad&&(a.direccion.ciudad="N/A"),e.ajax({url:e("#t1Endpoint").val()+"tarjeta",headers:{Authorization:"Bearer "+e("#t1Token").val(),"Content-Type":"application/json"},type:"POST",data:JSON.stringify(a),dataType:"json",cache:!1,statusCode:{409:function(){return e("html, body").animate({scrollTop:0},"slow"),e("html, body").animate({scrollTop:0},"slow"),e("#errorTarjeta").html('<div class="ico-alerta"></div><p>La tarjeta que estás intentando agregar ya existe.</p>'),e("#errorTarjeta").show(),!1}},success:function(a){return window.location=e("#t1Actualizar").val()},error:function(){return e("html, body").animate({scrollTop:0},"slow"),e("#errorTarjeta").html('<div class="ico-alerta"></div><p>T1: Ocurrió un error, por favor intenta de nuevo más tarde.</p>'),e("#errorTarjeta").show()}})):e("#messageBoletin").hide()},a.eliminar=function(a){return e.ajax({url:e("#t1Endpoint").val()+"tarjeta/"+a.trim(),headers:{Authorization:"Bearer "+e("#t1Token").val(),"Content-Type":"application/json"},type:"DELETE",dataType:"json",cache:!1,success:function(a){return console.log(a),window.location=e("#t1Actualizar").val()},error:function(){return console.log(response)}})},a.editar=function(a,o){var t,n;return!!ModuleValida.ValidaFormulario.validaFormulario("formulario"+o)&&(n="on"===e("#predet"+o).val().trim()?1:0,t={nombre:s(e("#nombre"+o).val()),expiracion_mes:parseInt(e("#mes-tarjeta"+o).val().trim()),expiracion_anio:parseInt(e("#ano-tarjeta"+o).val().trim()),default:n,direccion:{ciudad:s(e("#ciudad"+o).val().trim()),cp:e("#cpostal"+o).val().trim(),estado:e("#estado"+o).attr("data-codigo"),municipio:e("#municipio"+o).val().trim(),pais:"MEX",linea1:s(e("#direccion"+o).val().trim()),linea2:e("#num_ext"+o).val()+","+e("#num_int"+o).val()+","+e("#colonia"+o).val()}},""===t.direccion.ciudad&&(t.direccion.ciudad="N/A"),e.ajax({url:e("#t1Endpoint").val()+"tarjeta/"+a,headers:{Authorization:"Bearer "+e("#t1Token").val(),"Content-Type":"application/json"},type:"PUT",dataType:"json",cache:!1,data:JSON.stringify(t),success:function(a){return console.log(a),window.location=e("#t1Actualizar").val()},error:function(){return console.log(response)}}))},r=function(){var a;if(""!==(a=e("#t1Cliente").val()))return e.ajax({url:"/mi-cuenta/formas-pagoT1/obtenerTarjetasCliente/"+a,type:"GET",dataType:"json",cache:!1,success:function(e){if("success"===e.status)return i(e.data.tarjetas.data)},error:function(e){return console.log(e)}})},i=function(e){var a,o,t,n,r;for(n=[],a=o=0,t=e.length;o<t;a=++o)r=e[a],c(r,a),n.push(l(r.direccion,a));return n},c=function(a,o){var t,n,r,i,l,c,s;for(console.log(a,o),l='<dd> <ul class="tablePago"> <li id="check'+o+'"></li> <li class="tipoT"><img src="/css/img/'+a.marca+'-logo.png"></li> <li class="noT"><span>************'+a.terminacion+'</span></li> <li class="fechaV">'+a.expiracion_mes+"/"+a.expiracion_anio+'</li> <li class="nTit">'+a.nombre+'</li> <li class="edit"><a class="editar" id="'+o+'"></a></li> <li class="elim"><a onclick="ModuleT1Pagos.Tarjetas.eliminar(\''+a.token+'\');" href="/mi-cuenta/formas-pagoT1/actualizarT1" class="eliminar"></a></li> </ul> <div class="moduleAgregarFP" id="'+o+'"> <form role="form" id="formulario'+o+'" method="post" action="/mi-cuenta/formas-pagoT1/actualizarT1" novalidate onsubmit="return ModuleValida.ValidaFormulario.validaFormulario(\'formulario'+o+'\') && loading(true)" class="form-horizontal formulario"> <div class="ventana_emergente active erroresEmergen" style="display:none;"> <div class="ico-alerta"></div> <p class="erroresEmergen" style="display:none;"> <span>Favor de revisar los elementos marcados en rojo.</span> </p> </div> <div class="form-group"> <label class="requerido">Número de tarjeta : </label> <input disabled class="form-control campo campo_texto required" ype="text" tabindex="2" placeholder="************'+a.terminacion+'" id="numero'+o+'" name="numero'+o+'"> </div> <div class="form-group"> <label class="requerido">Nombre y apellidos tal cual como aparecen en la tarjeta : </label> <input maxlength="60" minlength="2" data-validate="t1Nombre" type="text" tabindex="1" required=\'required\' placeholder="Tal cual como aparece en la tarjeta" value="'+a.nombre+'" id="nombre'+o+'" name="nombre'+o+'" class="form-control :focus campo campo_texto required"> <spa id="contenedor'+o+'"></spa> </div> <div class="form-group por3"> <label class="requerido">Fecha de vencimiento : </label><span class="select"> <select required="required" class="campo required vencimiento" id="mes-tarjeta'+o+'" name="mes-tarjeta'+o+'"> <option value="" selected disabled>Mes</option> <option id="mesSelected01'+o+'" value="01">01</option> <option id="mesSelected02'+o+'" value="02">02</option> <option id="mesSelected03'+o+'" value="03">03</option> <option id="mesSelected04'+o+'" value="04">04</option> <option id="mesSelected05'+o+'" value="05">05</option> <option id="mesSelected06'+o+'" value="06">06</option> <option id="mesSelected07'+o+'" value="07">07</option> <option id="mesSelected08'+o+'" value="08">08</option> <option id="mesSelected09'+o+'" value="09">09</option> <option id="mesSelected10'+o+'" value="10">10</option> <option id="mesSelected11'+o+'" value="11">11</option> <option id="mesSelected12'+o+'" value="12">12</option> </select></span><span class="select"> <select required="required" class="campo required vencimiento" id="ano-tarjeta'+o+'" name="ano-tarjeta'+o+'"> </select> </span><span class="cvvCount"></span> </div> <div class="imgs_pago imgp_formulario"> <img src="/css/img/visa-logo.png" alt="Visa" id="logo-marca-visa'+o+'"> <img src="/css/img/masterc-logo.png" alt="Mastercard" id="logo-marca-mastercard'+o+'"> </div> <div class="predeterminado"> <input type="checkbox" name="predet'+o+'" id="predet'+o+'"> <label>Tarjeta predeterminada</label> </div> <div class="module_DireccionEnvio newDirection top"> <p> <strong>Dirección del estado de cuenta</strong></p> <div id="direccionT1'+o+'"></div> </div> <div class="botones_pago"> <button type="reset" class="btn-gris">Cancelar</button> <button type="button" class="btn-rojo" onclick="ModuleT1Pagos.Tarjetas.editar(\''+a.token+"', "+o+');" >Guardar Tarjeta</button> </div> </form> </div> </dd>',e("#tarjetasT1").append(l),l="",t=(new Date).getFullYear().toString().substr(-2),n=parseInt(t)+11,i='<option value="0" selected disabled>Año</option>';t!==n;)i=i+'<option id="anioSelected'+t+o+'" value="'+t+'">'+t+"</option>",t++;s=a.expiracion_anio.substr(-2),r=s+o,c=a.expiracion_mes+o,e("#ano-tarjeta"+o).html(i),e("#anioSelected"+r).attr("selected",!0),e("#mesSelected"+c).attr("selected",!0),i="",a.default?(e("#check"+o).addClass("check"),e("#predet"+o).attr("checked",!0)):e("#check"+o).addClass("noCheck"),e("#logo-marca-"+a.marca+o).addClass("selected")},l=function(a,o){var t,n,r,i,l;t=!0,a?(r=a.linea2.split(","),i=r[0]?r[0]:"",l=r[1]?r[1]:"",r[2]?r[2]:a.linea3):(i="",l="","",a={},a.linea1="",a.linea3="",a.cp="",a.ciudad="",t=!1),n='<div class="form-group"> <label class="requerido">Calle:</label> <input pattern=".{5,60}" maxlength="60" minlength="5" name="direccion" type="text"  placeholder="Calle" required="" id="direccion'+o+'" value="'+a.linea1+'" > </div> <div class="form-group por2"> <label class="requerido">Número Exterior:</label> <input type="text" required="required" name="num_ext" maxlength="10" required="" id="num_ext'+o+'" value="'+i+'"> </div> <div class="form-group por2"> <label>Número Interior:</label> <input type="text"  id="num_int'+o+'" name="num_int'+o+'" maxlength="7" value="'+l+'"> </div> <div class="form-group" id="contCP"> <label class="requerido">Código Postal:</label> <input onchange="ModuleT1Pagos.Tarjetas.obtenerDireccion('+o+', undefined)"  type="text" placeholder="Ej: 02233" required maxlength="5" minlength="5" value="'+a.cp+'" data-validate="cp" onchange="" pattern="[0-9]{5}"  name="cpostal" id="cpostal'+o+'"></br></br> <div id="errorCPcuenta'+o+'" class="ventana_emergente active" style="display:none"> </div> </div> <div class="form-group" id="coloniaContainer'+o+'"> <label>Colonia: </label> <span class="select"> <select required="required"  disabled="disabled" style=\'width: 500px\' name="colonia" id="colonia'+o+'" > <option value="" disabled selected >Selecciona tu Colonia</option> </select> </span> </div> <div class="form-group" id="municipioContainer'+o+'"> <label>Municipio ó Delegación:</label> <span class="select"> <select onchange="removeMunicipioCombo(this);" required="required" disabled="disabled" style=\'width: 500px\' name="municipio" id="municipio'+o+'"> <option value="" disabled="" selected="">Selecciona tu Municipio ó Delegacion</option> </select> </span> </div> <div class="form-group"> <label class="requerido">Estado:</label> <input maxlength="35" minlength="5" required readonly  disabled="disabled"  name="estado" id="estado'+o+'"/> </div> <div class="form-group"> <label class="requerido">Ciudad:</label> <input type="text" placeholder="Selecciona tu ciudad" disabled="disabled" pattern=".{5,50}"maxlength="35" minlength="5" name="ciudad" value="'+a.ciudad+'" id="ciudad'+o+'"> </div> <div id="direccionError" class="ventana_emergente active erroresEmergen" style="display:{% if error == \'1\' %}block{% else %}none{% endif %};"> <div class="ico-alerta"></div> <p id="direccionMensajeError"></p> <p class="erroresEmergen" style="display:none;"> <span>Favor de revisar los elementos marcados en rojo.</span></p> </div>',e("#direccionT1"+o).append(n),t&&ModuleT1Pagos.Tarjetas.obtenerDireccion(o,a),n="",r="",i="",l=""},a.obtenerDireccion=function(a,o){var t,n,r;"object"==typeof o&&(t=o.linea3),e("#errorCPcuenta"+a).html("").hide(),r="",n=e("#cpostal"+a).val(),parseInt(n)&&5===n.length?ModuleSepomex.Sepomex.serviceSepomex(n).then(function(n){var i,l,c,s,d,u,p,m;if(n.estatus)if(""!==n.datacp.estado.d_estado){if(e("#estado"+a).val(n.datacp.estado.d_estado),e("#estado"+a).attr("data-codigo",n.datacp.estado.c_estado),e("#colonia"+a).removeAttr("disabled"),e("#estado"+a).removeAttr("disabled"),e("#municipio"+a).removeAttr("disabled"),e("#ciudad"+a).removeAttr("disabled"),e("#municipioContainer"+a+" span").remove(""),e("#municipio"+a).remove(),n.datacp.municipios.length>0){for(e("body").off("change","#municipio"+a),e("#municipioContainer"+a).append('<span class="select"> <select required="required" style="width: 500px" name="municipio" id="municipio'+a+'"></select> </span>'),u=n.datacp.municipios,i=l=0,s=u.length;l<s;i=++l)m=u[i],r+='<option value="'+m.d_mnpio+'"',o&&m.d_mnpio.trim()===o.municipio.trim()&&(r+="selected"),r+=">"+m.d_mnpio+"</option>";e("#municipio"+a).html(""),e("#municipio"+a).html(r)}else e("#municipioContainer"+a(NaN)).remove(),e("#municipioContainer"+a).append('<input type="text" maxlength="35" name="municipio" id="municipio'+a+'" value=""/>');if(e("#coloniaContainer"+a+" span").remove(""),e("#colonia"+a).remove(),n.datacp.colonia.length>0){for(e("body").off("change","#colonia"+a),e("#coloniaContainer"+a).append('<span class="select"> <select required="required" style="width: 500px" name="colonia" id="colonia'+a+'"></select> </span>'),r="",p=n.datacp.colonia,i=c=0,d=p.length;c<d;i=++c)m=p[i],r+='<option value="'+m.d_asenta+'"',"string"==typeof t&&m.d_asenta.trim()===t.trim()&&(r+="selected"),r+=">"+m.d_asenta+"</option>";e("#colonia"+a).html(""),e("#colonia"+a).html(r)}else e("#coloniaContainer"+a(NaN)).remove(),e("#coloniaContainer"+a).append('<input type="text" maxlength="60" name="colonia" id="colonia'+a+'" value=""/>');void 0!==o&&""!==o.ciudad?e("#ciudad"+a).val(o.ciudad):""!==n.datacp.ciudad.d_ciudad&&e("#ciudad"+a).val(n.datacp.ciudad.d_ciudad),loading(!1)}else e("#cpostal"+a).val(""),e("#estado"+a).val(""),e("#errorCPcuenta"+a).html("En nuestros registros no encontramos tu cp, intenta con otro").show(),loading(!1);else e("#errorCPcuenta"+a).html("En nuestros registros no encontramos tu cp, intenta con otro").show(),e("#cpostal"+a+" , #estado"+a).val(""),loading(!1)}).catch(function(e){return console.log(e),loading(!1)}):loading(!1)},s=function(e){var a;for(e=e.toLowerCase().split(" "),a=0;a<e.length;)e[a]=e[a].charAt(0).toUpperCase()+e[a].slice(1),a++;return e.join(" ")},a}(),o.Tarjetas=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleProducto&&null!==ModuleProducto?ModuleProducto:{},"undefined"!=typeof ModuleCaja&&null!==ModuleCaja&&ModuleCaja,t.ModuleProducto=o,a=function(){function a(){}var o,t,n,r,i,l;return r={},a.no="N/A",a.start=function(){return e(function(){n()})},n=function(){e("#cantidad").bind("change keypress keyup blur focusout",function(){return e("#c").val(e(this).val())}),e("#btnClickRecoge").click(function(e){e.preventDefault(),t()}),e(".opc_colors #color").on("change",function(){return console.log("evento values ",this.value),a.tomaTalla(this.value)})},a.setObjTallaColor=function(e){r=e},a.getObjTallaColor=function(){return r},a.tomaTalla=function(a){var o,t,n,i,l,c,s,d,u;for(console.log(a),e(".boxTallas").removeClass("hidden"),t=r,console.log(t),n="",e(".opc_sizes #talla").html(""),i=0,c=t.length;i<c;i++)if(o=t[i],console.log(o.color===a),o.color===a){for(console.log("correcto"),console.log(o.sizes),d=o.sizes,l=0,s=d.length;l<s;l++)u=d[l],console.log(u),n+='<option value="'+u.size+"|"+u.stock+"|"+u.sku+'">'+u.size+"</option>","N/A"===u.size.toUpperCase()&&e(".boxTallas").addClass("hidden");break}n&&e(".opc_sizes #talla").html(n)},l=function(e){var a,o,t,n,r;for(o=i(e),r=!1,t=0,n=o.length;t<n;t++){if(a=o[t],console.log(a),""===a.value||null===a.value){r=!1;break}r=!0}return r},o=function(a){var o;return o=e("#"+a).serializeObject(),o.ajax=1,Promise.resolve(e.ajax({url:"/carrito/procesos/",type:"GET",data:o}))},a.agregarClickRecoge=function(a){if(loading(!0),l(a))return e.when(o(a)).then(function(a){return a.then(function(a){return e("#cart_count").text(a),e("#cantidadProductos a").attr("href","/carrito/"),loading(!1),console.log(a)}).catch(function(e){return loading(!1),console.log(e)})})},function(a){return dataLayer.push({event:"agregarProductoCarrito",ecommerce:{currencyCode:"MXN",add:{products:[{name:e("#"+a+' input[name="nombre"]').val(),id:e("#"+a+' input[name="id"]').val(),price:e("#"+a+' input[name="precio"]').val(),brand:e("#"+a+' input[name="marca"]').val(),category:e("#"+a+' input[name="categoria"]').val(),affiliation:e("#"+a+' input[name="tienda"]').val(),quantity:e("#"+a+' input[name="c"]').val(),dimension7:e("#"+a+' input[name="precio"]').val(),dimension8:e("#"+a+' input[name="num_parte"]').val()}]}}})},function(a){return fbq("track","AddToCart",{content_name:e("#"+a+' input[name="nombre"]').val(),content_category:e("#"+a+' input[name="categoria"]').val(),content_ids:"['"+e("#"+a+' input[name="id"]').val()+"']",content_type:"product",value:e("#"+a+' input[name="precio"]').val(),currency:"MXN"})},function(e,a){var o,t,n,r,i,l;for(o=document.getElementById("agregarRecomendaciones"),t=document.createElement("div"),t.setAttribute("class","sliderEmarsys"),l=[],n=r=1;r<=2;n=++r)i=document.createElement("div"),i.setAttribute("id","topical1"+n),i.setAttribute("class","personal-recs"),i.setAttribute("style","display:flex;"),t.appendChild(i),o.appendChild(t),ScarabQueue.push(["view",a]),1===n?ScarabQueue.push(["recommend",{logic:"ALSO_BOUGHT",containerId:"topical1"+n,templateId:"RelacionadoNav_nuevo",limit:15,success:function(e,a){return a(e)}}]):ScarabQueue.push(["recommend",{logic:"CART",containerId:"topical1"+n,templateId:"RelacionadoNav_nuevo",limit:15,success:function(e,a){return a(e)}}]),e?l.push(ScarabQueue.push(["go"])):l.push(void 0);return l},i=function(a){var o,t,n,r,i;for(n=e("#"+a).serializeArray(),o=[],r=0,i=n.length;r<i;r++)t=n[r],""===t.name&&void 0===t.name||o.push(t);return o},a.mostrarNotificarExistencia=function(a){return a?e("#mensajeAgotado").hide():e("#mensajeAgotado").show()},a.notificarExistencia=function(a,o){var t,n;o.preventDefault(),t=e("#email").val(),e("#correoEnviado").html(""),n={acepto:1,email:t},loading(!0),e.ajax({url:"/mi-cuenta/notificarme/producto/"+a,type:"POST",data:n,dataType:"json",cache:!1,success:function(a){return loading(!1),a.exito?(e("#correoEnviado").html("¡Gracias! Te notificaremos cuando esté producto vuelva a estar disponible"),e.fancybox.open({href:"#correoEnviado"}),e("#menResp").html("¡Gracias! Te notificaremos cuando esté producto vuelva a estar disponible"),e("#menResp").css("display","block")):(e("#correoEnviado").html("Ocurrió un error, por favor intentalo de nuevo más tarde"),e.fancybox.open({href:"#correoEnviado"}),e("#menResp").html("Ocurrió un error, por favor intentalo de nuevo más tarde"),e("#menResp").css("display","block"),console.log(a.exito))},error:function(){return e("#correoEnviado").html("Ocurrió un error, por favor intentalo de nuevo más tarde"),e.fancybox.open({href:"#correoEnviado"}),console.log("error"),loading(!1)}}),e("#correoEnviado").css("display","block"),e(".paEnvio").css("display","none")},t=function(){var a,o,t;if(e("#color").length>0?(o=e("#color").val(),t=e("#talla").val()):(o=1,t=1),""!==t&&""!==o)return 1!==o&&1!==t?(a=t.split("|"),e("#colorCR").val(o).trigger("change"),e("#tallaCR").val(a[2]).trigger("change")):e("#lnkMuestraSucursales").click(),e.fancybox("#modal-click-recoge")},a.getTallasByColor=function(a,o){var t,n,r,i,l,c,s,d,u;if(e("#tallaCR").prop("disabled",!0),""!==a){for(e("#tallaCR").children().remove(),n=e.parseJSON(o),console.log(o),console.log(n),u=[],i=0,c=n.length;i<c;i++)t=n[i],t.color===a&&(u=t.sizes);for(console.log(u),r="",l=0,s=u.length;l<s;l++)d=u[l],r+='<option value="'+d.sku+'">'+d.size+"</option>";return e(r).appendTo("#tallaCR"),e("#tallaCR").prop("selectedIndex",0),e("#tallaCR").prop("disabled",!1),this.cambioTalla()}},a.cambioTalla=function(){return e("#lnkMuestraSucursales").click()},a}(),o.Producto=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleWishList&&null!==ModuleWishList?ModuleWishList:{},t.ModuleWishList=o,a=function(){function a(){}var o,t,n,r,i;return a.start=function(){n()},n=function(){e("#addWishList").on("click",function(){var a;return a=e(this).attr("data-id"),e(this).hasClass("active")?(wishListeliminar(a),e(this).removeClass("active")):(e(this).addClass("active"),i(a))}),e(".wishlistButton").on("click",function(){var a,o;return o=e(this).attr("data-id"),a=e(this),e(this).hasClass("active")?(e.fancybox.open({href:"#modal-wishlistYaAgregado",titlePosition:"inside",transitionIn:"none",transitionOut:"none"}),e("#eliminarWL").on("click",function(){return e("#eliminarWL").unbind("click"),wishListeliminar(o),e.fancybox.close(),a.removeClass("active")})):(e(this).addClass("active"),i(o))})},i=function(a){loading(!0),e.ajax({type:"GET",url:"/producto/getProd/"+a,dataType:"json",success:function(a){var o,t;return o=a.fotos[0],"3496"===a.tienda.id&&(o=o.replace("/120/","/1200/")),o=proxyImagenes(o),t='<img src = "'+o+'">',e("#vistaRcarouselWL").empty(),e("#vistaRcarouselWL").append(t),e("#idWL").val(a.id),e("#idWL").val(a.id),r(),e.fancybox.open({href:"#modal-wishlist",titlePosition:"inside",transitionIn:"none",transitionOut:"none"})},beforeSend:function(){return e("#vistaRcarouselWL").empty()},complete:function(){return loading(!1)},error:function(e){return loading(!1)}}),loading(!0)},r=function(){var a,t,n,r;t=e("#colorWL").val(),r=e("#tallaWL").val(),n=e("#idWL").val(),a=1,o(n,a,t,r)},o=function(a,o,t,n){e.ajax({url:"/mi-cuenta/listadeseos/agrega/",type:"post",dataType:"json",cache:!1,data:{cantidad:1,id:a},beforeSend:function(){return loading(!0)},success:function(o){var t,n,r,i,l,c,s;if(!0===o.data.login)e("#wishlist_count").text(o.data.total_productos),e("#idsProducto").val(e("#idsProducto").val()+","+a),e("#idsProductos").val(e("#idsProductos").val()+","+a);else{if(n=[],void 0!==(c=JSON.parse(localStorage.getItem("idsProductos")))&&null!==c)for(t=i=0,l=c.length;0<=l?i<l:i>l;t=0<=l?++i:--i)s=n.indexOf(c[t]),-1!==s&&n.splice(s,1),n.push(c[t]);r=n.indexOf(a),-1!==r&&n.splice(r,1),n.push(a),localStorage.setItem("idsProductos",JSON.stringify(n)),e("#idsProducto").val(n),e("#idsProductos").val(n),e("#wishlist_count").text(n.length)}return loading(!1)},error:function(e,a,o){return loading(!1),console.log("Ocurrió un error al agregar el producto a tu lista de deseos.")}})},a.msiProducts=function(){var a,o,n,r;if(loading(!0),n=e("#msiemarsys").val(),n.length>0)for([],o=n.split(","),a=t(o),r=0;r<a.length;)e.ajax({type:"GET",url:"/producto/getProductoMSI/"+a[r],dataType:"json",success:function(a){if(a.length>0&&void 0!==a[0].id&&void 0!==a[0].msi)return e('[data-id="'+a[0].id+'"]').parent().find(".contentPromo").prepend('<div class="msiCard"><span>'+a[0].msi+" meses</span></div>")},complete:function(){return loading(!1)},error:function(e){return loading(!1)}}),r++,loading(!0)},t=function(e){return e.filter(function(e,a,o){return a===o.indexOf(e)})},a.wishListeliminar=function(a,o){null==o&&(o=0),console.log("Prepara para borrar lista de deseos..."),1===parseInt(document.getElementById("logeado").value)&&(console.log("Borrando de lista de deseos"),e.ajax({url:"/mi-cuenta/listadeseos/quitar/",type:"post",dataType:"json",cache:!1,data:{id:a},success:function(t){console.log(t),console.log(t.data.total_productos),!0===t.data.login&&(e("#wishlist_count").text(t.data.total_productos),1===o&&(document.location="/carrito/")),e("#wishlist_producto_"+a).hide(),loading(!1)},error:function(e,a,o){loading(!1),console.log("Ocurrió un error al quitar de tu lista de deseos.")},beforeSend:function(){loading(!0)}}))},a}(),o.WishList=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleSepomex&&null!==ModuleSepomex?ModuleSepomex:{},t.ModuleSepomex=o,a=function(){function a(){}return function(){},a.serviceSepomex=function(a){return Promise.resolve(e.ajax({url:"/sepomex/"+a,type:"POST",dataType:"json",cache:!1}))},a.getAutocompleteData=function(a){return Promise.resolve(e.ajax({url:"/sepomex/getAutocompleteData/"+a,type:"POST",dataType:"json",cache:!1}))},a}(),o.Sepomex=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,
o="undefined"!=typeof ModuleBarraCodigoPostal&&null!==ModuleBarraCodigoPostal?ModuleBarraCodigoPostal:{},t.ModuleBarraCodigoPostal=o,a=function(){function a(){}var o,t,n,r,i,l,c,s,d,u,p;return o=[],r=void 0,a.start=function(){var a;return p()?(window.location.href.includes("?barraCp=1")&&ModuleBarraCodigoPostal.BarraCodigoPostal.borrarDireccionFromLocalStorage(),a=ModuleLocalStorage.LocalStorage.getDireccion(),a&&0!==Object.entries(a).length?(l(!0),u(),i()&&ModuleFechaEstimada.FechaEstimada.calcularFechaBarraCodigoPostal(a.codigoPostal)):t()):(a=ModuleLocalStorage.LocalStorage.getDireccion(),a&&0!==Object.entries(a).length?(l(!0),u(),i()&&ModuleFechaEstimada.FechaEstimada.calcularFechaBarraCodigoPostal(a.codigoPostal)):l(!1)),e("#confirmar-barra-cp").on("click",function(){var a;a=e("#cp-barra").val(),5===a.length&&ModuleZonificacion.Zonificacion.getZonificacion(a).then(function(o){var t;if(o.status&&""===o.error)return t={},t.codigoPostal=a,o.ciudad?t.lugar=o.ciudad:t.lugar=o.municipio,ModuleLocalStorage.LocalStorage.setData("lsDireccion",t),ModuleFechaEstimada.FechaEstimada.calcularFechaBarraCodigoPostal(a),u(),e("#cp-barra").removeClass("error"),e("#cp-barra").val(""),e.fancybox.close()}).catch(function(a){console.log("errrrorrrr"),e("#cp-barra").addClass("error")})}),e("#barra-cp, #delEncontrado, #ingresaCP").on("click",function(a){return a.preventDefault(),e(".popupCP").remove(),p()?n():e.fancybox.open({href:"#modal-barra-cp",titlePosition:"inside",transitionIn:"none",transitionOut:"none"})})},p=function(){var e,a;return e=!1,a=ModuleLocalStorage.LocalStorage.readCookie("token_login"),a&&(e=!0),e},n=function(){var a;if(a=ModuleLocalStorage.LocalStorage.getData("lsDirecciones"))return c(a);e.ajax({type:"GET",url:"/mi-cuenta/direcciones-envio/procesos/getDireccionesEnvio",dataType:"json",success:function(a){return a.estatus?(ModuleLocalStorage.LocalStorage.setData("lsDirecciones",a.direcciones),c(a.direcciones)):e.fancybox.open({href:"#modal-barra-cp",titlePosition:"inside",transitionIn:"none",transitionOut:"none"})}})},a.setDireccionId=function(a){var t;r=a,d(a),p()&&(t=o[r],s(t),u(),e.fancybox.close())},s=function(e){ModuleLocalStorage.LocalStorage.setData("lsDireccion",e),d(e.id),ModuleFechaEstimada.FechaEstimada.calcularFechaBarraCodigoPostal(e.codigoPostal)},u=function(){var a,o,t;return t=ModuleLocalStorage.LocalStorage.getDireccion(),console.log("set enviar a barra cp"),console.log(t),a="Enviar a ",e("#nombreBarra").val(""),t.primer_nombre&&(e("#nombreBarra").val(t.primer_nombre+", "),a+=t.primer_nombre+", "),t.lugar&&(a+=t.lugar+", "),t.codigoPostal&&(o=t.codigoPostal),e("#barra-cp").contents().filter(function(){return 3===this.nodeType}).remove(),e("#barra-cp-direccion").text(a),e("#barra-codigo-postal").text(o)},d=function(a){return e("#direccionesBarraCP>div.selected").removeClass("selected"),e("#idDir"+a).addClass("selected")},a.obtenerDireccionPredeterminada=function(){return t()},t=function(){return e.ajax({type:"GET",url:"/mi-cuenta/direcciones-envio/procesos/getDatosBarraCP",dataType:"json",success:function(e){return e.estatus&&0!==Object.entries(e.direccion).length?(l(!0),s(e.direccion),u(),i()?ModuleFechaEstimada.FechaEstimada.calcularFechaBarraCodigoPostal(e.direccion.codigoPostal):void 0):l(!1)}})},i=function(){return!(!ModuleFechaEstimada||!window.location.href.includes("/producto"))},l=function(a){var o;return a?e("#info-modal-barra-cp").html('<p>Los tiempos de envío pueden variar según el C.P.</p> <div id="direccionesBarraCP"></div>'):!a&&p()&&e("#info-modal-barra-cp").html("<p>Los tiempos de envío pueden variar según el C.P.</p>"),p()?e("#info-modal-barra-cp").append('<a id="direcciones-envio" href="/mi-cuenta/direcciones-envio/" class="direcciones-envio">Agregar dirección de envío</a>'):(e("#info-modal-barra-cp").html('<p>Te mostraremos los tiempos de envío</p><p id="inicia-sesion" style="display: none;" > Si ya tienes cuenta, <a class="inicia-sesion">inicia sesión</a></p>'),e("#inicia-sesion").show(),o=e(".btn-login").attr("href"),e(".inicia-sesion").attr("href",o),e("#direcciones-envio").hide())},a.borrarDireccionFromLocalStorage=function(){return ModuleLocalStorage.LocalStorage.clearData("lsDireccion"),ModuleLocalStorage.LocalStorage.clearData("lsDirecciones"),t()},c=function(a){var t,n,r,i,l,c;for(o=[],n=ModuleLocalStorage.LocalStorage.getDireccion(),e("#direccionesBarraCP").empty(),r=i=0,l=a.length;i<l;r=++i)t=a[r],o[t.id]=t,c="",n&&n.id===t.id?c="selected":0===n.length&&1==+t.accesibilidad&&(c="selected"),e("#direccionesBarraCP").append('<div style="cursor:pointer" id="idDir'+t.id+'" class="'+c+'" onclick="ModuleBarraCodigoPostal.BarraCodigoPostal.setDireccionId('+t.id+')"> <p>'+t.nombre+" - "+t.ciudad+" "+t.codigoPostal+"</p> <p>"+t.direccion+" No. "+t.numeroExterior+", "+t.colonia+"</p> </div>"),e("#direcciones-envio").attr("href","/mi-cuenta/direcciones-envio/");return e.fancybox.open({href:"#modal-barra-cp",titlePosition:"inside",transitionIn:"none",transitionOut:"none"})},a}(),o.BarraCodigoPostal=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleFechaEstimada&&null!==ModuleFechaEstimada?ModuleFechaEstimada:{},t.ModuleFechaEstimada=o,a=function(){function a(){}var o,t,n,r,i,l,c;return a.start=function(){return e(function(){r()})},r=function(){return e("#codigopostal").click(l),e(".box_claroEnvios .btn-envios,.box_claroEnvios .link").click(t)},t=function(){e(".seleccionaEnvos, .resultadosCP").removeClass("show"),e(".ingresaCP").addClass("show"),e(".ingresaCP input").val(""),e("#codigopostal").removeClass("hidden")},l=function(){var a;onPromoClick("/producto/","producto","calculaFechaEstimada",1),e("#errorCPcuenta").html("").hide(),(a=e("#idprod").val())>0&&o(a)},o=function(a){var o,t;o=e("#cpEnvioReal").val(),t=n(),console.log(t),""===o&&(o=e("#cpEnvio").val(),e("ul.autocompleteCP li").remove(),console.log("cpEnvio: ["+o+"]")),parseInt(o)&&5===o.length&&i(o,a,t).then(function(a){return e.fancybox.close(),a.status?(c(a),e(".ingresaCP").hide(),e("#cp-barra").removeClass("error")):e("#errorCPcuenta").html("No disponible").show()})},i=function(a,o,t){var n,r;return n={cp:a,id:o,sku:t},r=e("#shipping_endpoint").val(),Promise.resolve(e.ajax({url:r,type:"POST",dataType:"json",data:n,cache:!1,error:function(a){return console.log(a.status),404===a.status?e("#errorCPcuenta").html("Código postal no encontrado").show():e("#errorCPcuenta").html("Favor de intentar mas tarde").show(),loading(!1)}}))},c=function(a){var o,t;return e("#estafetaCodigoRojo").hide(),o=e("#barra-codigo-postal").text(),t=""===a.shipping.range_copy?"Entre "+a.shipping.range_text+"*":a.shipping.range_copy+a.shipping.range_text+"*",e("#fecha").text(t),e("#delEncontrado").text("Enviar a "+e("#nombreBarra").val()+a.shipping.place+", "+o),a.shipping.fullfilment_red_code&&e("#estafetaCodigoRojo").show(),e(".ingresaCP").removeClass("show"),e(".resultadosCP").addClass("show")},a.calcularFechaBarraCodigoPostal=function(a){if(a)return e("#cpEnvio").val(a),l()},n=function(){var a,o,t,n;return o="",t=e("#talla").val(),t&&(n=t.split("|"),a=n.length,o=n[a-1]),o},a}(),o.FechaEstimada=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModulePopUpBarraCP&&null!==ModulePopUpBarraCP?ModulePopUpBarraCP:{},t.ModulePopUpBarraCP=o,a=function(){function a(){}var o,t;return a.start=function(){return e(function(){t()})},t=function(){var a;if(1===e("#barra-cp").length)return e("#barra-cp").parent().addClass("barraCPHeader"),o(),e(window).resize(function(){o()}),a=localStorage.getItem("firstCP"),null===a&&(e(".barraCPHeader").append('<div class="popupCP"><span class="close">X</span><div class="title" >Introduce un C.P.</div><div class="descrip">Te mostraremos el tiempo de entrega en cada producto.</div><div class="btn-rojo">Introduce C.P.</div></div>'),localStorage.setItem("firstCP","true")),e("body").on("click",".popupCP .btn-rojo",function(){e("#barra-cp").trigger("click"),e(".popupCP").remove()}),e("body").on("click",".popupCP .close",function(){e(".popupCP").remove()})},o=function(){e(window).innerWidth()>=781?(e(".promoHeader .barraCPHeader").append(e("#barra-cp")),e(".contMobileCP").remove()):(0===e(".contMobileCP.barraCPHeader").length&&e("header").append('<div class="contMobileCP barraCPHeader"></div>'),e(".contMobileCP.barraCPHeader").append(e(".promoHeader #barra-cp")))},a}(),ModulePopUpBarraCP.PopUpBarraCP=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleTiempoEntrega&&null!==ModuleTiempoEntrega?ModuleTiempoEntrega:{},t.ModuleTiempoEntrega=o,a=function(){function a(){}var o,t,n,r,i,l,c,s,d,u;return a.start=function(){return e(function(){i()})},i=function(){return e("#codigopostal").click(d),e(".box_claroEnvios .btn-envios,.box_claroEnvios .link").click(t),e("#cpEnvio").keyup(c),e("#cpEnvio").keydown(l),e(".autocompleteCP").on("click","li",function(){var a,o;o=e(this).html(),a=o.split(" - "),a=a[0].toString(),e("#cpEnvio").val(o),e("#cpEnvioReal").val(a),e(".autocompleteCP").removeClass("show")}),e(".autocompleteCP").on("mouseenter","li",function(){e(".autocompleteCP li").removeClass("hover"),e(this).addClass("hover")}),e(".autocompleteCP").on("mouseleave","li",function(){e(this).removeClass("hover")})},n=function(a){return e.when(ModuleSepomex.Sepomex.getAutocompleteData(a)).then(function(a){return a.then(function(a){var o,t,n;if(!1===a.estatus)return console.log("Código postal inválido"),e("ul.autocompleteCP li").remove(),e("#cpEnvio").val(""),e("#errorCPcuenta").html("Intenta con otro código postal").show(),loading(!1);for(e("ul.autocompleteCP li").remove(),o=t=0,n=a.length;0<=n?t<=n:t>=n;o=0<=n?++t:--t)e("<li />",{html:a[o]}).appendTo("ul.autocompleteCP");return loading(!1)})})},c=function(a){var o;return e("#errorCPcuenta").html("").hide(),o=e(this).val().length,e("ul.autocompleteCP li").remove(),o>=3&&o<=5?(n(e(this).val()),e(".autocompleteCP").addClass("show")):e(".autocompleteCP").removeClass("show")},l=function(a){var o,t,n;return n=void 0,!0!==e(".autocompleteCP").hasClass("show")?e(document).off("keypress"):(38===a.which&&(a.preventDefault(),!0!==e(".autocompleteCP li").hasClass("hover")?e(".autocompleteCP li:first-child").addClass("hover"):(e(".autocompleteCP li.hover").prev().addClass("hover").nextAll().removeClass("hover"),n=18*e(".autocompleteCP.show li.hover").index(),e(".autocompleteCP.show").scrollTop(n))),40===a.which&&(a.preventDefault(),!0!==e(".autocompleteCP li").hasClass("hover")?e(".autocompleteCP li:first-child").addClass("hover"):(e(".autocompleteCP li.hover").next().addClass("hover").prevAll().removeClass("hover"),n=18*e(".autocompleteCP.show li.hover").index(),e(".autocompleteCP.show").scrollTop(n))),13===a.which?(t=e(".autocompleteCP li.hover").html(),o=t.split(" - "),o=Number(o[0]),e("#cpEnvio").val(t),e("#cpEnvioReal").val(o)):void 0)},t=function(){e(".seleccionaEnvos, .resultadosCP").removeClass("show"),e(".ingresaCP").addClass("show"),e(".ingresaCP input").val("")},function(){return e(".ingresaCP").removeClass("show"),e(".resultadosCP").addClass("show")},function(){var a,o;return o=e(this).html(),a=o.split(" - "),a=Number(a[0]),e("#cpEnvio").val(o),e("#cpEnvioReal").val(a),e(".autocompleteCP").removeClass("show")},function(){return e(".autocompleteCP li").removeClass("hover"),e(this).addClass("hover")},function(){return e(this).removeClass("hover")},d=function(){var a,t;console.log("obtener tiempos entrega"),onPromoClick("/producto/","producto","calculaTiempoEntrega",1),e("#cpEnvio").val().length<3?(e("#errorCPcuenta").html("Intenta con otro código postal").show(),e("#cpEnvio").val("")):(loading(!0),a=0,t=[],e("#errorCPcuenta").html("").hide(),""===e("#productoId").val()?(a=1,e.when(r()).then(function(e){return e.then(function(e){return t=e,console.log("En carrito, productosId: "+t),o(t,a)})})):(a=0,t=[e("#productoId").val()],console.log("En producto, productoId: "+t),o(t,a)))},o=function(a,o){var t,n;for(0,0,n=0,[];n<a.length;)e("#tiempoEntrega"+a[n]).html("").hide(),n++;t=e("#cpEnvioReal").val(),console.log("cpEnvioReal: ["+t+"]"),""===t&&(t=e("#cpEnvio").val(),e("ul.autocompleteCP li").remove(),console.log("cpEnvio: ["+t+"]")),parseInt(t)&&5===t.length&&e.when(ModuleSepomex.Sepomex.serviceSepomex(t)).then(function(o){return o.then(function(o){return loading(!0),o.estatus?(e("#cpEncontrado").text(t),e.when(s(t,a)).then(function(a){return a.then(function(a){return a.estatus?(e("#fecha").text(a.fechaEntregaTexto+"*"),u(o)):(e(".resultadosCP").removeClass("show"),e("#errorCPcuenta").html("Favor de intentar mas tarde").show(),loading(!1))})})):e("#errorCPcuenta").html("En nuestros registros no encontramos tu cp, intenta con otro").show()})})},s=function(a,o){var t;return t={cp:a,idProducto:o},Promise.resolve(e.ajax({url:"/tiempoEntrega/",type:"POST",dataType:"json",data:t,cache:!1,error:function(a){return console.log("Intentar mas tarde"),e("#errorCPcuenta").html("Favor de intentar mas tarde").show(),loading(!1)}}))},function(a,o){var t;return t={cp:a,idProducto:o},Promise.resolve(e.ajax({url:"/tiempoEntrega/getTiempoEntregaFedex/",type:"POST",dataType:"json",data:t,cache:!1,error:function(a){return console.log("Intentar mas tarde"),e("#errorCPcuenta").html("Servicio Fedex: Favor de intentar mas tarde").show(),loading(!1)}}))},u=function(a){return e("#delEncontrado").text(a.datacp.colonia[0].d_asenta+", "+a.datacp.municipios[0].d_mnpio+" "+a.datacp.estado.d_estado),e(".ingresaCP").removeClass("show"),e(".resultadosCP").addClass("show")},function(a){var o;return e("#fecha").html(""),o={fechas:a},Promise.resolve(e.ajax({url:"/tiempoEntrega/getFechaMayor/",type:"POST",dataType:"json",data:o,cache:!1,error:function(a){return console.log("intentar mas tarde"),e("#errorCPcuenta").html("Favor de intentar mas tarde").show(),loading(!1)}}))},r=function(){return Promise.resolve(e.ajax({url:"/carrito/getIdsArray/",type:"GET",dataType:"json",cache:!1,then:function(e){return console.log("getIdsArray"+e)},error:function(a){return console.log("intentar mas tarde en error"),e("#errorCPcuenta").html("Favor de intentar mas tarde").show(),loading(!1)}}))},a}(),o.TiempoEntrega=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleValida&&null!==ModuleValida?ModuleValida:{},t.ModuleValida=o,a=function(){function a(){}var o,t,n,r;return a.start=function(){return e(function(){o()})},o=function(){},a.validaFormulario=function(a){var o,n,i,l,c;for(loading(!0),i=!1,c=document.getElementsByClassName("erroresEmergen"),o="block",a=t(a),l=e.inArray(0,r(a)),l<0&&(i=!0),n=void 0,n=0;n<c.length;)c[n].style.display="none",n++;if(i)for(n=void 0,n=0;n<c.length;)c[n].style.display="none",n++;else{for(n=void 0,n=0;n<c.length;)c[n].style.display=o,n++;loading(!1)}return i},t=function(e){var a,o,t,n;for(n=[],o=document.getElementById(e),t=0;t<o.elements.length;)a={},a.name=o.elements[t].name,a.value=o.elements[t].value,a.attr=o.elements[t].required,a.id=o.elements[t].id,n.push(a),t++;return n},r=function(e){var a,o,t,r;for(o=void 0,r=!1,t=new Array,t.push(1),o=0;o<e.length;)!0===e[o].attr&&(a=n(e[o],r),!1===a&&(r=!0),t.push(a)),++o;return t},n=function(a,o){var t,n,r,i,l,c,s,d,u,p,m,f,g,v;switch(s=0,u=document.getElementById(a.id),i=a.id,g=a.value,v=g.trim(),v.length>0?(s=1,e("#"+i).removeClass("error")):(s=0,e("#"+i).addClass("error")),u.getAttribute("data-validate")){case"email":c=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,s=c.test(u.value);break;case"tarjeta":p=u.value,r=/^[0-9]{15,16}$/,!0===r.test(p)?(s=1,e("#"+i).removeClass("error")):(s=0,e("#"+i).addClass("error"));break;case"tarjetaSears":p=u.value,r=/^[0-9]{12,13}$/,!0===r.test(p)?(s=1,e("#"+i).removeClass("error")):(s=0,e("#"+i).addClass("error"));break;case"cvv":p=u.value,r=/^[0-9]{3,4}$/,!0===r.test(p)?(s=1,e("#"+i).removeClass("error")):(s=0,e("#"+i).addClass("error"));break;case"cp":n=u.value,r=/^[0-9]{5}$/,!0===r.test(n)?(s=1,e("#"+i).removeClass("error")):(s=0,e("#"+i).addClass("error"));break;case"telefono":m=u.value,r=/^[0-9]{10}$/,!0===r.test(m)?(s=1,e("#"+i).removeClass("error")):(s=0,e("#"+i).addClass("error"));break;case"celular":t=u.value,r=/^[0-9]{10}$/,!0===r.test(t)?(s=1,e("#"+i).removeClass("error")):(s=0,e("#"+i).addClass("error"));break;case"transfer":f=u.value,r=/^[0-9]{12}$/,!0===r.test(f)?(s=1,e("#"+i).removeClass("error")):(s=0,e("#"+i).addClass("error"));break;case"securePass":l=u.value,d=l.trim(),r=/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/,!0===r.test(d)?(s=1,e("#"+i).removeClass("error")):(s=0,e("#"+i).addClass("error"));break;case"t1Nombre":l=u.value,d=l.trim(),r=/.{3,60}/,!0===r.test(d)?(s=1,e("#"+i).removeClass("error")):(s=0,e("#"+i).addClass("error"))}return s},a}(),o.ValidaFormulario=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleZonificacion&&null!==ModuleZonificacion?ModuleZonificacion:{},t.ModuleZonificacion=o,a=function(){function a(){}return function(){},a.getZonificacion=function(a){var o;return o=e("#zonificacion_endpoint").val(),Promise.resolve(e.ajax({url:o+"/"+a,type:"GET",dataType:"json",cache:!1,success:function(e){return console.log(e)},error:function(e){return console.log(e)}}))},a}(),o.Zonificacion=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleBuscador&&null!==ModuleBuscador?ModuleBuscador:{},t.ModuleBuscador=o,a=function(){function a(){console.log("Contructor AnteaterAPI")}var o,t,n,r,i,l,c,s;return l="https://stadistics.buscador.amarello.com.mx",o="claroDev",n={},i="",c="",a.ini=function(){return console.log("ini AnteanterEstadistica")},a.setUrlEstadisticas=function(e){return l=e},a.setClient=function(e){return o=e},t=function(){var a;return a={cliente:o},e.ajax({url:l+"/getToken",type:"GET",data:a,context:document.body}).done(function(e){return console.log(e),e}).fail(function(e){return console.log("Error de Red",e),e})},a.clickProductoObjet=function(e,a,o,l){var d;return console.log("Datos de token estadisticas ...... =",i,""===i),i=localStorage.getItem("tokenClickBuscador"),""!==i&&null!==i||t().done(function(e){return console.log("Datos de token estadisticas",e,e.token),localStorage.setItem("tokenClickBuscador",e.token),i=e.token}),c=localStorage.getItem("uuidClickBuscador"),""!==c&&null!==c||(c=s(),localStorage.setItem("uuidClickBuscador",c)),d=localStorage.getItem("lsDireccion"),null!==d&&(l=""===l||null===l?"<CP>:<"+d.codigoPostal+">.<lugar>:<"+d.lugar+">":l+".<CP>:<"+d.codigoPostal+">.<lugar>:<"+d.lugar+">"),l=""===l||null===l?"<device>:<"+navigator.platform+">":l+".<CP>:<"+navigator.platform+">",n.token=i,n.uuid=c,n.termino=e,n.url=a,n.pagina=o,n.md=l,console.log("registerClick",n),r().done(function(e){return console.log("Error click send",e),e}).error(function(e,a,o){if(console.log("Error click send",o," textStatus",a,"jqXHR",e,"errorThrown",o),"error"===a)return t().done(function(e){return n.token=e.token,localStorage.setItem("tokenClickBuscador",e.token),r().done(function(e){return console.log("Segundo click send",e)}).fail(function(e,a,o){return console.log("Error Segundo click send",o)})})})},r=function(){return e.ajax({url:l+"/registerClick",type:"GET",data:n,context:document.body}).done(function(e){return console.log(e),e}).fail(function(e){return console.log("Error de Red sendClickEvent",e),e})},s=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var a,o;return a=16*Math.random()|0,o="x"===e?a:3&a|8,o.toString(16)})},a}(),o.AnteanterEstadistica=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleBuscador&&null!==ModuleBuscador?ModuleBuscador:{},t.ModuleBuscador=o,a=function(){function a(e){o=e}var o,t,n,r,i,l,c,s;return null,null,c=48,l={cliente:"claro_dev",proxystylesheet:"xml2json",oe:"UTF-8",getfields:"*",sort:"",start:0,num:c,q:"",requiredfields:"",ds:"marcas:attribute_marca:0:0:8:0:1.sale_precio:sale_price:1:1:1000",do:"categories:categories:id,name:10:1",requiredobjects:""},s=[],i=1,o="https://claroshop.anteater.ai/search",a.setClient=function(e){return l.cliente=e},a.setUrlBuscador=function(e){return o=e},a.calcParam=function(){var a,o,c,s,d,u,p;return p=t("busquedaestricta"),console.log("@calcParam",p),void 0!==p&&(p.indexOf("sku:")>-1||p.indexOf("id:")>-1||p.indexOf("ean:")>-1)&&(u=p.replace("sku:",""),u=u.replace("id:",""),u=u.replace("ean:",""),console.log("valor busqueda espesifica",u),u.trim().length>0)?(console.log("sku",p.indexOf("sku")),console.log("id",p.indexOf("id")),console.log("ean",p.indexOf("ean")),p.indexOf("sku")>=0?l.requiredfields="int[sku]:"+u.trim():p.indexOf("id")>=0?l.requiredfields="int[id]:"+u.trim():p.indexOf("ean")>=0&&(l.requiredfields="int[ean]:"+u.trim()),console.log(l),e(".anteanter_section #search").val(p),this.buscar(l.q).done(function(e){return e})):(d=r("q"),d=decodeURIComponent(d),console.log("Enviado en front",d),l.q=void 0!==d?d:"",a=r("categoria"),l.requiredobjects=void 0!==a?"categories->id:"+a:"",o=r("marca"),void 0!==o&&this.agregarFiltro("attribute_marca",o,":"),s=r("precio-menor"),void 0!==s&&this.agregarFiltro("price",s,">"),console.log(s),c=r("precio-mayor"),void 0!==c&&this.agregarFiltro("price",c,"<"),console.log(c),i=n(),i>1&&this.setPagina(i),e(".anteanter_section #search").val(decodeURIComponent(l.q)),this.buscar(l.q).done(function(e){return e}))},a.buscar=function(a){return a=decodeURIComponent(a),l.q=void 0!==a?a:"",console.log("Buscando ...",a,l),e.ajax({url:o,type:"GET",data:l,context:document.body}).done(function(e){return console.log(e),e}).fail(function(e){return console.log("Error de Red",e),e})},a.getParams_query=function(){return l},a.getRequiredfields=function(){return s},a.getProductosPorPagina=function(){return c},a.setPagina=function(e){return l.start=e*c},a.getPagina=function(){return l.start/c},a.setOrdenar=function(e){return l.sort=e},a.updateUrl=function(){var a,o,t,n,r,c,d,u,p,m,f,g,v;if(history.pushState){for(o=[],p="",v="",g="",c="",console.log("updateUrl requiredfields",s),o.push("q="+l.q),r=d=0,u=s.length;d<u;r=++d)f=s[r],"attribute_marca"===f.llave?(o.push("marca="+f.valor),p=f.valor):"price"===f.llave&&">"===f.operador?(o.push("precio-menor="+f.valor),v=f.valor):"price"===f.llave&&"<"===f.operador?(o.push("precio-mayor="+f.valor),g=f.valor):o.push(f.llave+"="+f.valor);t=new URLSearchParams(location.search),t.has("busquedaestricta")&&t.set("busquedaestricta",t.get("busquedaestricta")),l.requiredobjects.length>0&&(c=l.requiredobjects.replace("categories->id:",""),o.push("categoria="+c)),0===this.getPagina()?o.push(1):o.push(this.getPagina()),m=window.location.protocol+"//"+window.location.host+"/resultados/"+o.join("/");try{window.history.pushState({path:m},"",m),a={"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Búsqueda",item:"https://www.claroshop.com/resultados"},{"@type":"ListItem",position:2,name:"palabraBuscada",item:"resultados/q="+l.q+"/"+i},{"@type":"ListItem",position:3,name:p,item:"resultados/q="+l.q+"/marca="+p+"/"+i},{"@type":"ListItem",position:4,name:c,item:"resultados/q="+l.q+"/marca="+p+"/categoria="+c+"/"+i},{"@type":"ListItem",position:5,name:"$"+v+" - $"+g,item:"resultados/q="+l.q+"/marca="+p+"/categoria="+c+"/precio-menor="+v+"/precio-mayor="+g+"/"+i}]},console.log("$breadcrumbList",a),e("#breadcrumbList").html(JSON.stringify(a))}catch(e){n=e,console.log("error =",n)}}},a.agregarFiltro=function(e,a,o){var t,n,r,i,c,d;for(this.setPagina(0),t=s.filter(function(a){return a.llave===e&&a.operador===o}),0===t.length&&s.push({llave:e,valor:a,operador:o}),n="",r=i=0,c=s.length;i<c;r=++i)d=s[r],n+=d.llave+d.operador+d.valor+".";return""!==n&&(n=n.substring(0,n.length-1)),l.requiredfields=n},a.agregarFiltroCategory=function(e){return this.setPagina(0),l.requiredobjects="categories->id:"+e},a.getAgregarFiltroCategory=function(){return l.requiredobjects.length>1?l.requiredobjects.replace("categories->id:",""):""},a.quitarFiltro=function(e){var a,o,t,n,r;for(this.setPagina(0),s=s.filter(function(a){return a.llave!==e}),console.log("quitar filtro",s),a="",o=t=0,n=s.length;t<n;o=++t)r=s[o],a+=r.llave+r.operador+r.valor+".";return""!==a&&(a=a.substring(0,a.length-1)),l.requiredfields=a},a.quitarFiltroCategory=function(){return this.setPagina(0),l.requiredobjects=""},t=function(e){var a,o,t,n;for(t=window.location.search.substring(1),n=t.split("&"),a=0;a<n.length;){if(o=n[a].split("="),decodeURIComponent(o[0])===e)return decodeURIComponent(o[1]);a++}console.log("Query variable %s not found",e)},r=function(e){var a,o,t,n;for(t=location.pathname,n=t.split("/"),a=0;a<n.length;){if(o=n[a].split("="),o[0]===e)return o[1];a++}console.log("Query variable %s not found",e)},n=function(){var e,a;return e=location.pathname,a=e.split("/"),i=a[a.length-1],i=isNaN(i)?1:i},a}(),o.AnteaterAPI=a}.call(this),function(){var e,a,o;o="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,jQuery,a="undefined"!=typeof ModuleBuscador&&null!==ModuleBuscador?ModuleBuscador:{},o.ModuleBuscador=a,e=function(){function e(){}var o,t,n;return t=[],o=[],e.push=function(e){var r;return t=e,o=a.AnteaterAPI,r=n(e),console.log("dataleyer",r),dataLayer.push(r)},n=function(e){var a,t,n,r,i,l,c,s,d,u,p,m,f,g,v,h,C;for(h=[],u=o.getPagina()+1,a=o.getProductosPorPagina(),n=r=0,l=e.length;r<l;n=++r)g=e[n],p=u>1?u*a+(n+1)-a:n+1,v={name:g.title,id:g.id,price:g.price,brand:g.attribute_marca,category:g.categories,list:"Resultados",position:p},h.push(v);for(s="",f="",m="",C=o.getRequiredfields(),n=i=0,c=C.length;i<c;n=++i)d=C[n],"attribute_marca"===d.llave?s=d.valor:"price"===d.llave&&">"===d.operador?f=d.valor:"price"===d.llave&&"<"===d.operador&&(m=d.valor);return t=o.getAgregarFiltroCategory(),d={event:"impressionsPushed",search_term_string:o.getParams_query().q,marca:s,categoria:t,precio_menor:f,precio_mayor:m,ecommerce:{currencyCode:"MXN",impressions:h}}},e.productClick=function(e){var a,n,r,i;return console.log("posicion=",e),console.log("productsGlobal=",t,t[1],t[e]),i=t[e],console.log("productObj=",i),n=o.getPagina(),a=o.getProductosPorPagina(),console.log("pagina productClick=",n,n>1),n>1?(r=n*a+(e+1)-a,console.log(r)):r=e+1,{event:"productClick",ecommerce:{click:{actionField:{list:"Resultados",products:[{name:i.title,id:i.id,price:i.price,brand:i.attribute_marca,category:i.categorias_leaf,position:r}]}}},eventCallback:function(){return document.location=base_path(NaN+i.id+"/"+i.title_seo)}}},e}(),a.DataLeyer=e}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleBuscador&&null!==ModuleBuscador?ModuleBuscador:{},t.ModuleBuscador=o,a=function(){function a(){}var t,n,r,i,l,c,s;return a.cardProducts=function(a){var t,n;return t=o.DataLeyer,n=i(a),t.push(n),console.log(e(location).attr("href")),e("#og-image").attr("content",n[0].link),e("#og-url").attr("content",e(location).attr("href")),e("#canonical").attr("href",e(location).attr("href")),console.log("#og-image===",n[0].link),console.log("@cardProducts",n),e("#tpl-product").tmpl(n).appendTo("#products"),e("#products .money").each(function(){var a,o;o=e(this).text(),a=l(o),e(this).text(a)})},a.filterBrand=function(a){var o;return o=n(a),e("#tpl-marca").tmpl(o).appendTo("#marcas dl"),e("#marcas").show()},a.filterCategory=function(a){var o;return o=r(a),e("#tpl-categoria").tmpl(o).appendTo("#categorias dl"),e("#categorias").show()},a.filterPrice=function(a){var o,t;return t=s(a),o=c(a),e("#sliderPrecios").slider("option","min",t),e("#sliderPrecios").slider("option","max",o),e("#sliderPrecios").slider("option","values",[t,o]),e("#precioMenor").val(t),e("#precioMayor").val(o),e("#precio").show()},a.resultsSearch=function(a,o){e("#result").html(""),e("#tpl-result").tmpl([{palabra:decodeURIComponent(o)}]).appendTo("#result"),e("#resultadoBusqueda").html(a.concat(" productos encontrados."))},i=function(e){var a,o,t,n,r,i,l,c,s,d,u;for(s=[],o=t=0,i=e.length;t<i;o=++t){for(a=e[o],c=new Object,c.key=o,d=a.MT,r=n=0,l=d.length;n<l;r=++n)u=d[r],c[u.N]=u.V;s.push(c)}return s},l=function(e){var a;return a=e.toString().split("."),a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),a.join(".")},n=function(e){var a,o,n,r,i,l;for(l=[],o=n=0,r=e.length;n<r;o=++n)a=e[o],a.V.length>0&&a.V.trim().length&&(i=new Object,i.name=a.V.trim().toUpperCase(),l.push(i));return l=[].concat(t(new Map(l.map(function(e){return[JSON.stringify(e),e]})).values()))},r=function(e){var a,o,n,r,i,l;for(o=[],r=i=0,l=e.length;i<l;r=++i)n=e[r],n.name.length>0&&n.name.trim().length&&"null"!==n.id&&(a=new Object,a.name=n.name,a.id_categoria=n.id,void 0===o.find(function(e){return e.id_categoria===n.id})&&o.push(a));return o=[].concat(t(new Map(o.map(function(e){return[JSON.stringify(e),e]})).values()))},t=function(e){var a,o;if(Array.isArray(e)){for(o=0,a=Array(e.length);o<e.length;)a[o]=e[o],o++;return a}return Array.from(e)},c=function(e){var a,o,t,n,r;for(r=[],o=t=0,n=e.length;t<n;o=++t)a=e[o],r.push(a.MAX);return Math.max.apply(null,r)},s=function(e){var a,o,t,n,r;for(r=[],o=t=0,n=e.length;t<n;o=++t)a=e[o],r.push(a.MIN);return Math.min.apply(null,r)},a}(),o.Render=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleCaja&&null!==ModuleCaja?ModuleCaja:{},_ModuleValida="undefined"!=typeof ModuleValida&&null!==ModuleValida?ModuleValida:{},_ModuleDatalayer="undefined"!=typeof ModuleDatalayer&&null!==ModuleDatalayer?ModuleDatalayer:{},t.ModuleCaja=o,a=function(){function a(){}var o=null;return a.init=function(){activaBarra(),e("#activarDir").click(activar),e(".dirElementHead").click(toggleDireccion),e(".establecerPrede").click(establecerPrede),e(".trashIcn").click(eliminarDir),e("#removeDir").click(eliminarDirAcepto),e(".editIcn").click(editarDireccion),e("#editarDireccion").click(editarDirAcepto),e(".colapse").click(agregaDir),e(".ValidateCP").click(obtenerCP),e(".continuar").click(seleccionaDir),e(".agregarEstablecer").click(agregaEstablecido),e("#obtenerDirecciones").click(obtenerDir),e(".ingresaData").click(hideDireccion),e("#colonia").change(removeColonia),e("#municipio").change(removeMunicipio)},activaBarra=function(){1==e("#flagDir").val()?(e(".emidata2").addClass("headIngresa"),e(".emidata3").removeClass("colapse").addClass("ingresaData").addClass("active").addClass("plusActive"),e(".dataTitle").html("Ingresa tus datos"),e(".cell-loading2").removeClass("llenarBarra"),e(".dp1").removeClass("dotPalomita"),e(".pagoElement").addClass("desactivado2")):(e(".emidata2").removeClass("headIngresa"),e(".emidata3").addClass("colapse").removeClass("ingresaData").removeClass("active").removeClass("plusActive"),e(".dataTitle").html("Agregar dirección"),e(".cell-loading2").addClass("llenarBarra"),e(".dp1").addClass("dotPalomita"))},hideDireccion=function(){e(".mostrarDet").hasClass("activeAdress")?(e(".mostrarDet").slideDown("fast").removeClass("activeAdress"),e(".ingresaData").removeClass("desplegado").addClass("active").addClass("plusActive")):(e(".mostrarDet").slideUp("fast").addClass("activeAdress"),
e(".ingresaData").removeClass("active").removeClass("plusActive").addClass("desplegado"))},activar=function(){e(".dirElement, .dirElement2").removeClass("desactivado"),e(".pagoElement").addClass("desactivado2"),e(".cell-loading2").removeClass("llenarBarra"),e(".dp1").removeClass("dotPalomita")},toggleDireccion=function(a){a.preventDefault(),e(".dirElementHead").removeClass("active"),e(this).addClass("active"),e(".detalleDesplegable").not(e(this).next(".detalleDesplegable")).slideUp().prev(".desplegableIn, .continuar").removeClass("desplegado"),e(this).next(".detalleDesplegable").stop().slideToggle("fast",function(){})},establecerPrede=function(a){a.preventDefault(),console.log(a.target);var o=e(a.target).data("id");loading(!0),e.ajax({url:"/caja/direccion-envio/procesos/direccionPredeterminada",type:"POST",dataType:"json",cache:!1,data:{id:o},success:function(o){console.log(o.estatus),o.estatus&&(e("body").off("click",".establecerPrede"),e(".dirElementHead").removeClass("active"),e(a.target).parent().addClass("active"),e(".estrellaDirPredeterminada").html("Establecer como predeterminada").addClass("establecerPrede").removeClass("activo"),e(a.target).html("Dirección predeterminada").removeClass("establecerPrede").addClass("activo"),e(".dirElementDetalle").css("display","none"),e(".establecerPrede").click(establecerPrede),loading(!1))},error:function(e,a,o){console.log("Ocurrió un error al seleccionar una direccion predeterminada"),loading(!1)}})},eliminarDir=function(a){e(".trashIcn").fancybox({titlePosition:"inside",transitionIn:"none",transitionOut:"none"});var t=e(a.target).data("id");o=e(a.target),e("#eliminarDireccionid").val(t)},eliminarDirAcepto=function(){loading(!0);var a=e("#eliminarDireccionid").val();e.fancybox.close(),e.ajax({url:"/caja/direccion-envio/procesos/elimina",type:"POST",dataType:"json",cache:!1,data:{id:a},success:function(e){console.log(e.estatus),e.estatus&&obtenerDir(e.idDir).done(function(a){seleccionaDirAjax(e.idDir).done(function(){o.parents("div.dirElement").remove(),recalcular(e.cp),loading(!1)})})},error:function(e,a,o){console.log("Ocurrió un error al tratar de eliminar una direccion"),loading(!1)}})},editarDireccion=function(a){a.preventDefault();var o=e(a.target).data("id");e(".dataTitle").html("Confirma dirección"),loading(!0),e.ajax({url:"/caja/direccion-envio/procesos/obtenerDireccionAjax",type:"POST",dataType:"json",cache:!1,data:{iddir:o},beforeSend:function(){},success:function(a){e(".emidata2").removeClass("desactivado"),e("#idDir").val(a.id),e("#nombre").val(a.nombre),e("#telefono").val(a.telefono),e("#direccion").val(a.direccion),e("#cpostal").val(a.codigoPostal),e("#num_ext").val(a.numeroExterior),e("#num_int").val(a.numeroInterior),e("#entreCalles").val(a.entre_calles1),e("#entreCalles2").val(a.entre_calles2),e("#observaciones").val(a.referencias),e("#estado").val(a.estado),e("#estado").removeAttr("disabled");var o="<option value='"+a.municipio+"'>"+a.municipio+"</option>";e("#municipio").html(""),e("#municipio").html(o),e("#municipio").removeAttr("disabled");var t="<option value='"+a.colonia+"'>"+a.colonia+"</option>";e("#colonia").html(""),e("#colonia").html(t),e("#colonia").removeAttr("disabled"),e("#ciudad").val(a.ciudad),"1"==a.accesibilidad?(e(".agregarEstablecer").hide(),e("#predeterminada").val("1")):e(".agregarEstablecer").show(),e(".colapse").hasClass("plus2")?(e(".colapseCol").slideUp("fast"),e(".mostrarDet").slideDown("fast"),e(".quitdata").fadeOut(),e(".ocultarDireccion").fadeOut(),e(".editmydata1").fadeIn(),e("html, body").animate({scrollTop:e("#ancla1").offset().top-30},700),e(".colapse").removeClass("plus2"),e(".colapse").addClass("active"),e(".colapse").addClass("plusActive")):(e(".colapseCol").slideDown("fast"),e(".mostrarDet").slideUp("fast"),e(".quitdata").fadeIn(),e(".ocultarDireccion").fadeIn(),e(".editmydata1").fadeOut(),e("html, body").animate({scrollTop:e("#ancla1").offset().top-30},700),e(".colapse").addClass("plus2"),e(".colapse").removeClass("active"),e(".colapse").removeClass("plusActive")),console.log(a),loading(!1)},error:function(e,a,o){console.log("Ocurrió un error al agregar el producto a tu lista de deseos."),loading(!1)}})},editarDirAcepto=function(){if(resValidar=ModuleValida.ValidaFormulario.validaFormulario("agregarDireccion"),resValidar){var a=e("#agregarDireccion").serializeObject();return a.id_dir=a.idDir,a.celular=a.telefono,a.ajax=1,loading(!0),e.ajax({url:"/caja/direccion-envio/procesos/agregar",type:"POST",dataType:"json",cache:!1,data:a,success:function(o){console.log(o),o.estatus?obtenerDir(o.dir).done(function(t){ModuleDatalayer.Eventos.setCheckoutStep2(),seleccionaDirAjax(o.dir).done(function(){e("html, body").animate({scrollTop:e(".colapseCol").offset().top-700},2e3),e(".detalleDesplegable").not(e(this).next(".detalleDesplegable")).slideUp().prev(".desplegableIn, .continuar").removeClass("desplegado"),e(this).next(".detalleDesplegable").stop().slideToggle("fast",function(){}),e(".pagoElement").removeClass("desactivado2"),e(".cell-loading2").addClass("llenarBarra"),e(".dp1").addClass("dotPalomita"),recalcular(a.cpostal),loading(!1)})}):(e("#errorCP").html(o.error).show(),e(".AvisoCostodeEnvio").hide(),e(".dirHide").hide(),loading(!1))},error:function(e,a,o){console.log("Ocurrió un error al agregar al guardar o editar tu direccion."),loading(!1)}})}},agregaDir=function(){e(".dataTitle").html("Ingresa tus datos"),document.getElementById("agregarDireccion").reset(),e("#idDir").val(""),e(".colapse").hasClass("plus2")?(e(".colapseCol").slideUp("fast"),e(".mostrarDet").slideDown("fast"),e(".quitdata").fadeOut(),e(".ocultarDireccion").fadeOut(),e(".editmydata1").fadeIn(),e("html, body").animate({scrollTop:e("#ancla1").offset().top-30},700),e(".colapse").removeClass("plus2"),e(".colapse").addClass("active"),e(".colapse").addClass("plusActive")):(e(".colapseCol").slideDown("fast"),e(".mostrarDet").slideUp("fast"),e(".quitdata").fadeIn(),e(".ocultarDireccion").fadeIn(),e(".editmydata1").fadeOut(),e("html, body").animate({scrollTop:e("#ancla1").offset().top-30},700),e(".colapse").addClass("plus2"),e(".colapse").removeClass("active"),e(".colapse").removeClass("plusActive"))},obtenerCP=function(){e("#errorCP").html("").hide();var a=e("#cpostal").val();if(loading(!0),!parseInt(a)||5!==a.length)return e("#cpostal").addClass("error"),e(".AvisoCostodeEnvio").hide(),e(".dirHide").hide(),void loading(!1);e("#cpostal").removeClass("error"),e.ajax({url:"/sepomex/"+a,type:"POST",dataType:"json",cache:!1,success:function(a){console.log(a),a.estatus?obtenerCosto().done(function(o){e("#costoEnvio").html(parseFloat(o.costo).toFixed(2)),e(".cajaFiltrosResponsiva-pago").addClass("bajo"),e("html, body").animate({scrollTop:e(".numExteriorInterior").offset().top+400},500),document.getElementById("estado").value=a.datacp.estado.d_estado,document.getElementById("ciudad").value=a.datacp.ciudad.d_ciudad,e("#coloniaContainer span").remove(""),e("#colonia").remove(),a.datacp.colonia.length>0&&(e("body").off("change","#colonia"),opciones="",e("#coloniaContainer").append("<span><select name='colonia' id='colonia' class='selectGris' required='required'></select></span>"),e.each(a.datacp.colonia,function(e,a){opciones+="<option value='"+a.d_asenta+"'>"+a.d_asenta+"</option>"}),opciones+="<option value='none'> Me gustaría escribirla por mi mismo.</option>",e("#colonia").html(""),e("#colonia").html(opciones),e("#colonia").change(removeColonia)),e("#municipioContainer span").remove(""),e("#municipio").remove(),a.datacp.municipios.length>0&&(e("body").off("change","#municipio"),opciones="",e("#municipioContainer").append("<span><select name='municipio' id='municipio' class='selectGris' required='required'></select></span>"),e.each(a.datacp.municipios,function(e,a){opciones+="<option value='"+a.d_mnpio+"'>"+a.d_mnpio+"</option>"}),opciones+="<option value='none'> Me gustaría escribirla por mi mismo.</option>",e("#municipio").html(""),e("#municipio").html(opciones),e("#municipio").change(removeMunicipio)),e(".AvisoCostodeEnvio").show(),e(".dirHide").show(),loading(!1)}):(e("#errorCP").html(a.error).show(),e(".AvisoCostodeEnvio").hide(),e(".dirHide").hide(),loading(!1))}})},obtenerCosto=function(){var a=e("#cpostal").val();return loading(!0),e.ajax({url:"/caja/direccion-envio/procesos/obtenerCostoEnvio",type:"POST",dataType:"json",cache:!1,data:{cp:a}})},removeColonia=function(){colonia=e("#colonia").val();var a,o;"none"==colonia&&(a=e("#colonia").parent(),o=a.parent(),a.remove(),o.append("<input type='text' name='colonia' id='colonia' value='' class='cajaTextoGris' required/>"))},removeMunicipio=function(){municipio=e("#municipio").val();var a,o;"none"==municipio&&(a=e("#municipio").parent(),o=a.parent(),a.remove(),o.append("<input type='text' name='municipio' id='municipio' value='' class='cajaTextoGris' required/>"))},seleccionaDirAjax=function(a){return loading(!0),e.ajax({url:"/caja/direccion-envio/procesos/seleccionaNuevaDir",type:"POST",dataType:"json",cache:!1,data:{idDireccion:a}})},seleccionaDir=function(a){a.preventDefault();var o=e(a.target).data("id");console.log(o),loading(!0),seleccionaDirAjax(o).done(function(o){console.log(o),o.status&&(ModuleDatalayer.Eventos.setCheckoutStep2(),a.preventDefault(),loading(!1),recalcular(),e("html, body").animate({scrollTop:e(".colapseCol").offset().top-700},2e3),e(".detalleDesplegable").not(e(this).next(".detalleDesplegable")).slideUp().prev(".desplegableIn, .continuar").removeClass("desplegado"),e(this).next(".detalleDesplegable").stop().slideToggle("fast",function(){}),e(".pagoElement").removeClass("desactivado2"),e(".dirElement, .dirElement2").addClass("desactivado").css("order","0"),e(a.target).parents().addClass("desactivado").css("order","-1"),e(".cell-loading2").addClass("llenarBarra"),e(".dp1").addClass("dotPalomita"))}).fail(function(){console.log("Ocurrió un error al agregar el producto a tu lista de deseos."),loading(!1)})},agregaEstablecido=function(){e("#idDir").val();e(this).hasClass("activo")?(e(this).removeClass("activo"),e("#predeterminada").val("0")):(e(this).addClass("activo"),e("#predeterminada").val("1"))},obtenerDir=function(a){return loading(!0),e.ajax({url:"/caja/direccion-envio/procesos/obtenerDirecciones",type:"POST",dataType:"json",success:function(o){e("body").off("click",".dirElementHead, .establecerPrede, .continuar, .trashIcn, .editIcn, .ingresaData, #removeDir, .colapse"),console.log(o);var t="";for(0==o.length?(e(".emidata2").addClass("headIngresa"),e(".emidata3").removeClass("colapse").addClass("ingresaData").addClass("active").addClass("plusActive"),e(".dataTitle").html("Ingresa tus datos"),e(".cell-loading2").removeClass("llenarBarra"),e(".dp1").removeClass("dotPalomita"),e(".pagoElement").addClass("desactivado2"),e(".emidata2").css("display","block"),e(".mostrarDet").css("display","block"),e(".headIngresa").removeClass("desactivado"),e(".emidata4").css("display","none"),e(".ingresaData").click(hideDireccion)):1==o.length?(e("body").off("click",".ingresaData"),e(".cell-loading2").addClass("llenarBarra"),e(".dp1").addClass("dotPalomita"),e(".colapse").css("display","block"),e(".emidata2").removeClass("headIngresa"),e(".emidata3").addClass("colapse").removeClass("ingresaData").removeClass("active").removeClass("plusActive"),e(".dataTitle").html("Agregar dirección"),e(".pagoElement").removeClass("desactivado2"),e(".AvisoCostodeEnvio").hide(),e(".dirHide").hide(),e(".dirElement2").addClass("desactivado"),e(".colapseCol").slideDown("fast"),e(".mostrarDet").slideUp("fast"),e(".quitdata").fadeIn(),e(".ocultarDireccion").fadeIn(),e(".editmydata1").fadeOut(),e("html, body").animate({scrollTop:e("#ancla1").offset().top-30},700),e(".colapse").addClass("plus2"),e(".colapse").removeClass("active"),e(".colapse").removeClass("plusActive")):(e(".cell-loading2").addClass("llenarBarra"),e(".dp1").addClass("dotPalomita"),e(".pagoElement").removeClass("desactivado2"),e(".AvisoCostodeEnvio").hide(),e(".dirHide").hide(),e(".dirElement2").addClass("desactivado"),e(".colapseCol").slideDown("fast"),e(".mostrarDet").slideUp("fast"),e(".quitdata").fadeIn(),e(".ocultarDireccion").fadeIn(),e(".editmydata1").fadeOut(),e("html, body").animate({scrollTop:e("#ancla1").offset().top-30},700),e(".colapse").addClass("plus2"),e(".colapse").removeClass("active"),e(".colapse").removeClass("plusActive")),i=0;i<o.length;i++){if(0==a)var n=o[i].accesibilidad,r="1";else var n=o[i].id,r=a;n==r?(t+='<div class="dirElement quitdata remove desactivado" style="order:-1;">',t+='<div id="activo" class="dirElementHead active desplegableIn">'):(t+='<div class="dirElement quitdata remove desactivado mostrarDirs" style="order:0;">',t+='<div class="dirElementHead desplegableIn">'),t+='<h4 class="recibe_nombre2">'+o[i].nombre+"</h4>",t+='<span class="recibe_direccion2">'+o[i].direccion+"</span>","1"==o[i].accesibilidad?t+='<span class="estrellaDirPredeterminada activo" data-id="'+o[i].id+'">Dirección predeterminada</span>':t+='<span class="estrellaDirPredeterminada establecerPrede" data-id="'+o[i].id+'">Establecer como predeterminada</span>',t+="</div>",t+='<div style="display: none;" class="dirElementDetalle detalleDesplegable">',t+="<p>"+o[i].direccion+"<br>"+o[i].colonia+", CP "+o[i].codigoPostal+"<br>"+o[i].municipio+", "+o[i].pais+"</p>",t+='<ul class="IconsEdit IEd-loc"><li><a rel="nofollow" href="#modal-vistaRapida" class="trashIcn" data-id="'+o[i].id+'"></a></li>',t+='<li class="editIcn displaydata2" data-id="'+o[i].id+'"></li></ul>',t+='<button class="continuar" data-id="'+o[i].id+'">Seleccionar y cotinuar</button>',t+="</div></div>"}document.getElementById("agregarDireccion").reset(),e(".agregarEstablecer").show(),e(".colapseCol").html(t),e(".dirElementHead").click(toggleDireccion),e(".establecerPrede").click(establecerPrede),e(".continuar").click(seleccionaDir),e(".trashIcn").click(eliminarDir),e(".editIcn").click(editarDireccion),console.log(t),loading(!1)},error:function(e,a,o){console.log("Ocurrió un error al agregar el producto a tu lista de deseos."),loading(!1)}})},loading=function(a){switch(a){case!0:if(0===e(".oneMomentPlease").length)return e('<div class="oneMomentPlease"><span class="fa fa-pulse"></span></div>').insertAfter("footer");break;case!1:return e(".oneMomentPlease").remove()}},a}(),o.DireccionesEnvio=a}.call(this),function(){var e,a,o,t;t="undefined"!=typeof exports&&null!==exports?exports:"undefined"!=typeof window&&null!==window?window:this,e=jQuery,o="undefined"!=typeof ModuleCaja&&null!==ModuleCaja?ModuleCaja:{},t.ModuleCaja=o,a=function(){function a(){}return a.init=function(){},repintar=function(a){e(".costo_entrega").text("$"+a.costoEnvio.toFixed(2)),e("#total").text("$"+a.total.toFixed(2));for(var o=0;o<a.grupos.length;o++)e("#costoGrupo"+o).text("$"+a.grupos[o].costoTotalGrupo.toFixed(2));e("#descuentoFpago").text("-$"+a.descuentoFpago.toFixed(2)),0!=a.descuentoCupon?e("#val-cupon").html("<div>-$"+a.descuentoCupon.toFixed(2)+"</div>"):e("#val-cupon").html("")},recalcular=function(a,o){return o&&(o=o.replace(/\s/g,""),o=o.substring(0,6)),e.ajax({url:"/caja/recalcular/",dataType:"json",cache:!1,type:"POST",data:{idform:a,bim:o},beforeSend:function(){loading(!0)},success:function(e){repintar(e),loading(!1)},error:function(e){console.log("error"+e),loading(!1)}})},a.recalcular=recalcular,a}(),o.ResumenCompra=a}.call(this);